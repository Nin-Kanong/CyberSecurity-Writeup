<h1> Active Reconnaissance </h1>

<img width="1512" height="253" alt="image" src="https://github.com/user-attachments/assets/4d7fcf4f-0863-4012-a7b9-fcc65f21c833" />


## Lab  URL: https://tryhackme.com/room/activerecon




## Task 1: Introduction

- Passive Reconnaissance
  - Involves gathering information without directly interacting with the target.
  - Examples: searching public records, websites, or social media.
  - Goal: collect data quietly, without alerting the target.
- Active Reconnaissance
  - Involves direct engagement with the target system or network.
  - Tools used:
    - **Web browser**: to explore and collect details about the target.
    - **Ping**: checks if a host is reachable and measures response time.
    - **Traceroute**: maps the path packets take to reach the target.
    - **Telnet**: tests connectivity and interacts with services on specific ports.
    - **Netcat (nc)**: versatile tool for probing services, sending data, or opening connections.
<img width="512" height="512" alt="image" src="https://github.com/user-attachments/assets/b7463785-b9d9-4b80-940c-fd8297918e74" />



### what is Active Reconnaissance?
Active reconnaissance means making direct contact with the target to gather information.
- Methods:
  - Human interaction → phone calls, visits, or social engineering tactics.
  - Technical interaction → connecting to systems (e.g., visiting websites, probing firewalls, checking open ports like SSH)

- Similar to closely inspecting locks and windows on a house — you’re directly testing defenses.

> Active reconnaissance = direct engagement with the target (human or technical), but only with legal approval.

<img width="512" height="512" alt="image" src="https://github.com/user-attachments/assets/a5b82f85-36f6-46de-9dd2-a91418d5b3dd" />


### Active Reconnaissance
- Active reconnaissance involves making direct connections to the target machine to gather information.

- Logging Impact:
  - Such connections may be recorded in logs, showing details like:
   - Client IP address
   - Time of connection
   - Duration of connection

- Normal vs Suspicious Activity:
  - Not all connections appear suspicious.
  - Example: web browsing blends in with normal user traffic, making reconnaissance harder to detect.

- Red Team Advantage:
  - Attackers (red team) can disguise reconnaissance as regular client activity.
  - This helps avoid detection by defenders (blue team).


> Active reconnaissance = direct engagement with the target, which can leave traces in logs, but clever techniques (like blending in with normal browsing) allow red teams to gather information without raising alarms.



### Active Reconnaissance Tools
- **Web Browser + Developer Tools**:
  - Can be `armed` to gather detailed information about a target website.
  - Useful for inspecting elements, network requests, cookies, and headers.
- **Ping**:
  - Tests connectivity to a host.
  - Reveals if the target is reachable and provides round-trip time.
- **Traceroute**:
  - Maps the path packets take to reach the target.
  - Helps identify intermediate routers and network structure.
- **Telnet**:
  - Connects to specific ports/services.
  - Useful for testing service availability and banner grabbing.

>  These common tools (browser, ping, traceroute, telnet) are simple but powerful for active reconnaissance, since they directly interact with the target system or network.


---



## Task 2: Web Browser

### Web Browser in Active Reconnaissanc
- Convenience:
  - Browsers are available on all systems and can be used to gather information about a target.

- Transport Level Connections:
  - HTTP → TCP port 80 (default).
  - HTTPS → TCP port 443 (default).
  - Browsers hide these default ports in the address bar.
  - Custom ports can be specified, e.g. `https://127.0.0.1:8834/` connects to port 8834 on localhost via HTTPS.

- Developer Tools:
  - Shortcut keys:
    - **Windows/Linux**: `Ctrl + Shift + I`
    - **Mac**: `Option + Command + I (⌥ + ⌘ + I)`
  - Available in Firefox, Chrome, and Chromium.
  - Capabilities:
    - Inspect and modify JavaScript files.
    - View and analyze cookies stored on your system.
    - Explore the folder structure of site content.
    - Monitor network requests and responses between browser and server.

> A web browser isn’t just for viewing pages—it can be “armed” with Developer Tools to inspect ports, cookies, scripts, and network traffic, making it a versatile tool for active reconnaissance.

- IF in this I test with tryhackme -> Go to `browser` -> type `tryhackme.com` -> `Ctrl + Shift + I`:
<img width="1919" height="993" alt="image" src="https://github.com/user-attachments/assets/a432cdf3-0110-440d-9298-654561216453" />

<img width="1922" height="784" alt="image" src="https://github.com/user-attachments/assets/5b5cccb3-6025-4d1d-a85e-d73aba3cc744" />



### Useful Browser Add-ons for Active Reconnaissanc
- **FoxyProxy**
  - Purpose: Quickly switch between different proxy servers.
  - Use Case: Convenient when working with tools like Burp Suite or when rotating proxies.
  - Benefit: Saves time and simplifies proxy management during testing
  - To get extension: https://chromewebstore.google.com/detail/foxyproxy/gcknhkkoolaabfmlnjonogaaifnjlfnp?hl=en&pli=1
<img width="557" height="401" alt="image" src="https://github.com/user-attachments/assets/40a2aa7f-d605-4d0b-b040-dd2493fb9d83" />

- **User-Agent Switcher and Manager**
  - Purpose: Change the browser’s User-Agent string.
  - Use Case: Pretend to access a site from a different OS or browser (e.g., simulate iPhone browsing from Firefox).
  - Benefit: Helps test how websites respond to different clients and can bypass simple restrictions.
  - To get extension: https://addons.mozilla.org/en-US/firefox/addon/user-agent-string-switcher/
<img width="747" height="679" alt="image" src="https://github.com/user-attachments/assets/505c6a84-9a7f-4571-97c7-c21012222da1" />


- **Wappalyzer**
  - Purpose: Identify technologies used on websites.
  - Use Case: Detect frameworks, CMS, analytics tools, server software, and more.
  - Benefit: Provides quick insights into the target’s tech stack while browsing normally.
  - To get extension: https://addons.mozilla.org/en-US/firefox/addon/wappalyzer/
<img width="1270" height="905" alt="image" src="https://github.com/user-attachments/assets/ec3137c0-bcc0-4476-a713-afdd8ad764b3" />


>  These add-ons extend the browser into a lightweight reconnaissance toolkit—helping you manage proxies, disguise your client identity, and uncover the technologies behind websites.


### Question: Browse to the following website and ensure that you have opened your Developer Tools on AttackBox Firefox, or the browser on your computer. Using the Developer Tools, figure out the total number of questions.

<img width="1771" height="260" alt="image" src="https://github.com/user-attachments/assets/5da941e9-a694-4c28-a7fb-75c3e5fa9dca" />

<img width="1919" height="1021" alt="image" src="https://github.com/user-attachments/assets/f5afdb99-80a5-4a64-9f4a-efd5f7a1a02c" />

- Open Developer Tools -> `Ctrl + Shift + I`:
<img width="1918" height="777" alt="image" src="https://github.com/user-attachments/assets/af122202-4021-41b5-8416-c59f27edf8e0" />

- Search for the keyword “question” -> Press `Ctrl + F` -> type `question` or `Q`:
<img width="1522" height="926" alt="image" src="https://github.com/user-attachments/assets/6bbc9ab4-7d45-4aac-a741-51a793280af1" />

<img width="1447" height="808" alt="image" src="https://github.com/user-attachments/assets/c109a9f6-2caf-408b-92dd-559afd3f9e69" />

<img width="562" height="659" alt="image" src="https://github.com/user-attachments/assets/479f23b3-3f13-4f30-95e7-6210cbd0bc93" />

Now we found `8`:
<img width="1761" height="273" alt="image" src="https://github.com/user-attachments/assets/2edd811f-63c7-48df-9755-848e1ce01752" />


---



## Task 3: Ping


### Ping as **Netwok Ping-Pong**:
- Just like in table tennis, when we send the ball (packet) and expect it back.
- If we get a reply, we know the other side is "alive" and reachable.
- If you don’t, either the system is offline, the packet was blocked, or there’s a routing issue.


### Technical Definition
- **Ping command**: Sends an `ICMP Echo Request` packet.
- **Reply**: If the target is online and reachable, it responds with an `ICMP Echo Reply`.
- Conditions for success:
  - Proper routing between source and destination.
  - No firewall blocking ICMP traffic.
  - Target system configured to respond


### Objectives of Ping
- **Connectivity check**: Confirms if two systems can communicate.
- **Availability check**: Determines if a remote host is online.
- **Troubleshooting tool**: Helps isolate network issues (e.g., DNS vs. routing vs. firewall).
- **Pre-scan step**: Ensures the system is reachable before running heavier scans like Nmap for OS detection or service enumeration.

### Different Uses of Ping
- Latency measurement: Round-trip time (RTT) shows how fast packets travel between systems.
- Packet loss detection: Multiple pings can reveal unstable connections.
- Network path testing: Combined with tools like traceroute, ping helps map connectivity issues.
- Monitoring: Automated scripts or tools (like Nagios, Zabbix) use ping to check if servers stay online.


### After Start MAchine:
In this click on **Start Machine**:
<img width="1078" height="848" alt="image" src="https://github.com/user-attachments/assets/76d28ffc-3a85-4ec8-ae23-18c06542dfe1" />

- In this if we not yet to setrup OpenVPN on TryHackMe, Download my **PDF** and following it to connectto Kali:
[OpenVPN_TryHackme.pdf](https://github.com/user-attachments/files/24353903/OpenVPN_TryHackme.pdf)

- But in this I can't do with OpeNvpn But in this I can't use `ping` with this `IP`:



- So after in this I use with `AtackBox` -> open `Attackbox`:



- After we will see this:
<img width="1919" height="1025" alt="image" src="https://github.com/user-attachments/assets/56e9ca75-96c6-464d-8855-61faf5344693" />


- Open `Terminal` on `Attackbox`:
<img width="955" height="977" alt="image" src="https://github.com/user-attachments/assets/6072b1a8-3131-423b-b7d2-815f7a4d2655" />

Now we got new `Terminal`.
````
ping 10.65.160.194
````
<img width="675" height="303" alt="image" src="https://github.com/user-attachments/assets/5c5f6679-3125-42f4-abb2-f06cc1a37215" />

- Runs indefinitely until stopped with CTRL+c


- Or we can `ping` with `Hostname`:
````
ping tryhackme.com
````

- System resolves the hostname to an IP before sending ICMP packets.



#### Send fixed number of packets
````
ping -c 10 10.65.160.194
````
<img width="552" height="267" alt="image" src="https://github.com/user-attachments/assets/2b6df0fb-89fc-4253-bbad-0eb0ea50f3ae" />

- Sends 10 packets then stops.




#### Windows
````
ping tryhackme.com
````
<img width="792" height="296" alt="image" src="https://github.com/user-attachments/assets/6814766b-d6f2-4490-949a-4da0d76ecbb9" />

- By default, sends `4 packets`.

#### Send fixed number of packets:
````
ping -n 10 10 10.65.160.194
````


- Equivalent to Linux’s `-c`.


### Protocol Details
- **Ping uses ICMP (Internet Control Message Protocol)**.
- **ICMP types relevant to ping**:
  - `Type 8`: Echo Request (sent by you).
  - `Type 0`: Echo Reply (sent back by target).
- Requirements for success:
  - Target host must be online.
  - ICMP must not be blocked by firewalls or routers.
  - Routing must be correct.





### Ping success case:
- Sent 5 ICMP Echo Requests to the target.
- Received 5 Echo Replies back.
- This confirms the target system is online and reachable.
- Average round-trip time: 0.475 ms, maximum: 0.636 ms → shows low latency and stable connectivity.
- No firewalls or routers blocked ICMP traffic along the path


### Penetration testing perspective:
- Ping is the first step to check if a system is alive.
  - Once confirmed, the next step is to discover:
  - Open ports
   - Running services
   - Operating system details


### Ping failure case:
- After shutting down the target VM, pinging `10.65.160.194` resulted in no replies.
- This indicates the system is offline or not responding to ICMP requests




### What “Destination Host Unreachable” Means
- Our system (AttackBox) tried to send ICMP Echo Requests to `10.65.160.194`.
- No replies came back → 100% packet loss.
- Instead of silence, your own system reports `Destination Host Unreachable`, which indicates:
  - The packet couldn’t even reach the target host.
  - Somewhere along the route, a device (often your own gateway/router) knows the destination is unreachable and sends back this ICMP error.






### No Ping Reply
- Target system is offline
  - Shut down, still booting, or OS crash.
  - Matches your case: VM was powered off.
- Disconnected from the network
  - Target unplugged, cable removed, or faulty switch/router in the path.
- Firewall blocking ICMP
  - Could be host-based (e.g., Windows Firewall blocks ping by default).
  - Could be a network appliance filtering ICMP traffic.
- Your own system/network issue
  - If your AttackBox itself is unplugged or misconfigured, you’ll also see unreachable errors.



> No reply (silent timeout): Packets are sent but dropped somewhere, no response at all.
> Destination Host Unreachable: A device along the path actively tells you the host cannot be reached.



---


### Question 1: Which option would you use to set the size of the data carried by the ICMP echo request?

<img width="916" height="90" alt="image" src="https://github.com/user-attachments/assets/d02ecdd7-462e-455a-93ba-662a29559b90" />


#### ICMP Echo Request Size:
##### On linux / Unix systems:
- Use `-s` option:
````
ping -s 100 10.65.160.194
````
<img width="586" height="264" alt="image" src="https://github.com/user-attachments/assets/c571f103-0647-446a-aeee-5f885aa1a987" />

##### On windows system:
````
ping -l 100 tryhackme.com
````
<img width="751" height="300" alt="image" src="https://github.com/user-attachments/assets/43f4fca2-5db6-4491-98a6-142bead3a785" />

- In this I don't connect VPN with my windows show I test with `tryhackme`.
- This sets the ICMP payload size to `100 bytes` (default is usually 56 bytes, which becomes 64 bytes including the ICMP header).

- Now we found:
````
-s
````
<img width="921" height="92" alt="image" src="https://github.com/user-attachments/assets/e6a0481d-93fc-49f9-a014-3825c763f8a0" />



### Question 2: What is the size of the ICMP header in bytes?
<img width="914" height="92" alt="image" src="https://github.com/user-attachments/assets/b18bdde2-3d91-43d9-9cb8-08ff0dad8903" />

- The ICMP (Internet Message Protocol) header is 8 bytes in size:
​​  - 1 byte for Type
  - 1 byte for Code
  - 2 byte for Checksum
  - 4 byte for Rest of Header (often include fields like identifier and Sequence Number, depending on the ICMP message type)
 
- So we find the correct answer is:
````
Y
````
<img width="1065" height="89" alt="image" src="https://github.com/user-attachments/assets/23410b04-c951-4fb5-9505-f50c1259921c" />



### Question 3: Does MS Windows Firewall block ping by default? (Y/N)
<img width="914" height="95" alt="image" src="https://github.com/user-attachments/assets/1d0c5ae1-4bb1-4cf4-93df-c2f403bfbb02" />


- Microsoft Windows Firewall does block incoming ping (ICMP Echo Request) by default for security reasons.

- Now we found the correct answer is:
````
Y
````


> **Note**: This applies to inbound pings from other computers on the network or internet. Outbound pings (e.g., you pinging google.com) are allowed by default. You can allow inbound pings via Windows Defender Firewall rules if needed.



### Question 3: Deploy the VM for this task and using the AttackBox terminal, issue the command ping -c 10 10.65.161.166. How many ping replies did you get back?
<img width="1300" height="124" alt="image" src="https://github.com/user-attachments/assets/a2ee5965-8ad0-45a9-add7-da8ddb215ee6" />

- If i ping to my target:
````
ping -c 10 10.65.161.166
````
<img width="816" height="173" alt="image" src="https://github.com/user-attachments/assets/97dbc176-d82e-42e4-a017-002aac0a1628" />

- Now i got `10 packets transmitted` back. and we can use with:
````
10
````
<img width="1062" height="107" alt="image" src="https://github.com/user-attachments/assets/6012d3e0-d253-4e75-bd74-b157d28c72b3" />

- Now we got successful to solve this.


> **Note**: 10.65.161.166 is my target that i start machine.

----




## Task 4: Traceroute


### What is traceroute?
traceroute shows the path your internet traffic takes from your computer to another device.


### How does it work?
- IT send out little packets with a Time To Live (TTL) value.
- TTL = maximum number of routers (hops) a packet can pass through.
- Each router decreases the TTL by 1.
- When TTL hits 0, the router sends back an error message saying “I dropped this packet.”
- `traceroute` uses that message to learn the router’s IP address.



### Why is it useful?
- Shows how many routers (hops) are between you and the target.
- Reveals each router’s IP address on the path.
- Helps diagnose network problems (e.g., where a connection gets stuck).


### Command 

#### Linux/macOS:
````
traceroute 10.65.161.166
````
<img width="1262" height="774" alt="image" src="https://github.com/user-attachments/assets/c8636e74-ba83-4646-9158-b26a18e16682" />


#### Windows
In this my windows `CMD` or `Powershell` with no VPn, so i ping to `tryhackme.com`:
````
tracert tryhackme.com
````
<img width="1062" height="331" alt="image" src="https://github.com/user-attachments/assets/7bc47316-d6ba-4e08-acaa-5f86542bc55c" />


> traceroute: maps the route your data takes across the internet by making routers reveal themselves one by one.

<img width="1432" height="1972" alt="image" src="https://github.com/user-attachments/assets/debaaf0f-c457-4d6f-ac7d-22c1c4ad6128" />


### TTL and ICMP Time Exceeded

- **TTL (Time To Live)** is a field in IP packets that limits how many hops (routers) a packet can travel.
- Each router **decreases TTL by 1**. If TTL becomes `0`, the packet is `discarded`.
- When discarded, the router usually sends back an ICMP "Time Exceeded" message to the sender.
- This helps tools like traceroute map the path of packets.
- Some routers are configured not to send ICMP replies, making them invisible in traceroute.

<img width="1522" height="1360" alt="image" src="https://github.com/user-attachments/assets/706f18d1-1a3e-4ca7-84a4-0f4b7b14cfa8" />


### How Traceroute Works on Linux
- **Step 1**: Traceroute sends UDP packets with TTL = 1.
- **Step 2**: The first router decrements TTL → it becomes 0, so the router discards the packet and replies with ICMP Time Exceeded. This reveals the router’s IP.
- **Step 3**: Traceroute then sends another packet with TTL = 2. The second router drops it, sending back its IP.
- **Step 4**: This process repeats, incrementing TTL each time, mapping the path hop by hop.

````
traceroute tryhackme.com
````
<img width="968" height="246" alt="image" src="https://github.com/user-attachments/assets/751a55dc-ca21-44e2-84b0-3ebdbd9aa131" />




























